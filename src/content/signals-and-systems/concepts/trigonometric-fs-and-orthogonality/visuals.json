{
    "visuals": [
        {
            "id": "efs-to-tfs-diagram",
            "type": "plotly",
            "title": "From Exponential FS to Trigonometric FS",
            "description": "The exponential FS uses complex exponentials e^{jkω₀t}. Combining +k and −k terms using Euler's formula gives the trigonometric form with real cosines and sines.",
            "traces": [
                {
                    "x": [
                        "Exponential FS\nx(t) = Σ X_k e^{jkω₀t}",
                        "→ Euler's formula →",
                        "Trigonometric FS\na₀/2 + Σ(a_k cos + b_k sin)"
                    ],
                    "y": [
                        1,
                        1,
                        1
                    ],
                    "type": "bar",
                    "marker": {
                        "color": [
                            "#4f8cff",
                            "#f5a623",
                            "#2fbf8f"
                        ]
                    },
                    "text": [
                        "Complex\nexponentials",
                        "e^{jθ} = cosθ + jsinθ\nCombine ±k terms",
                        "Real cosines\nand sines"
                    ],
                    "textposition": "inside",
                    "textfont": {
                        "size": 10,
                        "color": "#ffffff"
                    },
                    "showlegend": false,
                    "hoverinfo": "none"
                }
            ],
            "layout": {
                "xaxis": {
                    "title": ""
                },
                "yaxis": {
                    "visible": false,
                    "range": [
                        0,
                        1.3
                    ]
                },
                "showlegend": false
            },
            "height": 280
        },
        {
            "id": "tfs-coefficients-relation",
            "type": "plotly",
            "title": "Coefficient Relationships: X_k ↔ a_k, b_k",
            "description": "a_k = 2Re{X_k}, b_k = −2Im{X_k}, X_k = (a_k − jb_k)/2. These convert between the two FS forms.",
            "traces": [
                {
                    "x": [
                        "X_k\n(complex)",
                        "a_k = 2Re{X_k}",
                        "b_k = −2Im{X_k}",
                        "Back:\nX_k = (a_k−jb_k)/2"
                    ],
                    "y": [
                        1,
                        1,
                        1,
                        1
                    ],
                    "type": "bar",
                    "marker": {
                        "color": [
                            "#4f8cff",
                            "#2fbf8f",
                            "#ff6b8a",
                            "#6b62ff"
                        ]
                    },
                    "text": [
                        "Exponential\ncoefficient",
                        "Real part\n→ cosine terms",
                        "Imaginary part\n→ sine terms",
                        "Inverse\nrelation"
                    ],
                    "textposition": "inside",
                    "textfont": {
                        "size": 10,
                        "color": "#ffffff"
                    },
                    "showlegend": false,
                    "hoverinfo": "none"
                }
            ],
            "layout": {
                "xaxis": {
                    "title": ""
                },
                "yaxis": {
                    "visible": false,
                    "range": [
                        0,
                        1.3
                    ]
                },
                "showlegend": false
            },
            "height": 280
        },
        {
            "id": "orthogonal-cosines",
            "type": "plotly",
            "title": "Orthogonal Cosines: cos(ω₀t) and cos(2ω₀t)",
            "description": "The product cos(ω₀t)·cos(2ω₀t) oscillates symmetrically and integrates to zero over one period. This is orthogonality.",
            "traces": [
                {
                    "x_expr": "Array.from({length: 300}, (_, i) => i * 2 * Math.PI / 300)",
                    "y_expr": "Array.from({length: 300}, (_, i) => Math.cos(i * 2 * Math.PI / 300))",
                    "mode": "lines",
                    "name": "cos(ω₀t)",
                    "line": {
                        "color": "#4f8cff",
                        "width": 2
                    }
                },
                {
                    "x_expr": "Array.from({length: 300}, (_, i) => i * 2 * Math.PI / 300)",
                    "y_expr": "Array.from({length: 300}, (_, i) => Math.cos(2 * i * 2 * Math.PI / 300))",
                    "mode": "lines",
                    "name": "cos(2ω₀t)",
                    "line": {
                        "color": "#ff6b8a",
                        "width": 2
                    }
                },
                {
                    "x_expr": "Array.from({length: 300}, (_, i) => i * 2 * Math.PI / 300)",
                    "y_expr": "Array.from({length: 300}, (_, i) => Math.cos(i * 2 * Math.PI / 300) * Math.cos(2 * i * 2 * Math.PI / 300))",
                    "mode": "lines",
                    "name": "Product (integrates to 0)",
                    "line": {
                        "color": "#2fbf8f",
                        "width": 2,
                        "dash": "dash"
                    }
                }
            ],
            "layout": {
                "xaxis": {
                    "title": "t"
                },
                "yaxis": {
                    "title": "Amplitude"
                },
                "showlegend": true
            }
        },
        {
            "id": "orthogonality-grid",
            "type": "plotly",
            "title": "Orthogonality Inner Product Table",
            "description": "⟨cos(mω₀t), cos(nω₀t)⟩ = 0 when m ≠ n, and = T₀/2 when m = n. Same for sines. Cross terms (cos-sin) always zero.",
            "traces": [
                {
                    "x": [
                        "⟨cos m, cos n⟩\nm ≠ n",
                        "⟨cos m, cos m⟩\nm = n",
                        "⟨sin m, sin n⟩\nm ≠ n",
                        "⟨sin m, sin m⟩\nm = n",
                        "⟨cos m, sin n⟩\nany m, n"
                    ],
                    "y": [
                        0,
                        0.5,
                        0,
                        0.5,
                        0
                    ],
                    "type": "bar",
                    "marker": {
                        "color": [
                            "#ff6b8a",
                            "#2fbf8f",
                            "#ff6b8a",
                            "#2fbf8f",
                            "#ff6b8a"
                        ]
                    },
                    "text": [
                        "= 0\n(orthogonal)",
                        "= T₀/2\n(self)",
                        "= 0\n(orthogonal)",
                        "= T₀/2\n(self)",
                        "= 0\n(always!)"
                    ],
                    "textposition": "inside",
                    "textfont": {
                        "size": 10,
                        "color": "#ffffff"
                    },
                    "showlegend": false,
                    "hoverinfo": "none"
                }
            ],
            "layout": {
                "xaxis": {
                    "title": "Inner Product"
                },
                "yaxis": {
                    "title": "Value / T₀"
                },
                "showlegend": false
            },
            "height": 300
        },
        {
            "id": "cos-sin-orthogonal",
            "type": "plotly",
            "title": "Cosine and Sine Are Always Orthogonal",
            "description": "cos(kω₀t) and sin(kω₀t) are orthogonal for any k: their product integrates to zero over one period.",
            "traces": [
                {
                    "x_expr": "Array.from({length: 300}, (_, i) => i * 2 * Math.PI / 300)",
                    "y_expr": "Array.from({length: 300}, (_, i) => Math.cos(2 * i * 2 * Math.PI / 300))",
                    "mode": "lines",
                    "name": "cos(2ω₀t)",
                    "line": {
                        "color": "#4f8cff",
                        "width": 2
                    }
                },
                {
                    "x_expr": "Array.from({length: 300}, (_, i) => i * 2 * Math.PI / 300)",
                    "y_expr": "Array.from({length: 300}, (_, i) => Math.sin(2 * i * 2 * Math.PI / 300))",
                    "mode": "lines",
                    "name": "sin(2ω₀t)",
                    "line": {
                        "color": "#ff6b8a",
                        "width": 2
                    }
                },
                {
                    "x_expr": "Array.from({length: 300}, (_, i) => i * 2 * Math.PI / 300)",
                    "y_expr": "Array.from({length: 300}, (_, i) => 0.5 * Math.sin(4 * i * 2 * Math.PI / 300))",
                    "mode": "lines",
                    "name": "Product = sin(4ω₀t)/2 → ∫ = 0",
                    "line": {
                        "color": "#2fbf8f",
                        "width": 1.5,
                        "dash": "dot"
                    }
                }
            ],
            "layout": {
                "xaxis": {
                    "title": "t"
                },
                "yaxis": {
                    "title": "Amplitude"
                },
                "showlegend": true
            }
        },
        {
            "id": "even-odd-tfs-symmetry",
            "type": "plotly",
            "title": "Symmetry in the TFS: Even → Cosines Only, Odd → Sines Only",
            "description": "Even signals x(t) = x(−t) have b_k = 0 (only cosines). Odd signals x(t) = −x(−t) have a_k = 0 (only sines).",
            "traces": [
                {
                    "x": [
                        "Even signal\nx(t) = x(−t)",
                        "Odd signal\nx(t) = −x(−t)",
                        "Neither"
                    ],
                    "y": [
                        1,
                        1,
                        1
                    ],
                    "type": "bar",
                    "marker": {
                        "color": [
                            "#4f8cff",
                            "#ff6b8a",
                            "#6b62ff"
                        ]
                    },
                    "text": [
                        "b_k = 0\nCosines ONLY\na₀/2 + Σa_k cos(kω₀t)",
                        "a_k = 0\nSines ONLY\nΣb_k sin(kω₀t)",
                        "Both a_k, b_k\npresent"
                    ],
                    "textposition": "inside",
                    "textfont": {
                        "size": 10,
                        "color": "#ffffff"
                    },
                    "showlegend": false,
                    "hoverinfo": "none"
                }
            ],
            "layout": {
                "xaxis": {
                    "title": "Signal Symmetry"
                },
                "yaxis": {
                    "visible": false,
                    "range": [
                        0,
                        1.3
                    ]
                },
                "showlegend": false
            },
            "height": 300
        },
        {
            "id": "tfs-square-wave",
            "type": "plotly",
            "title": "TFS of a Standard Square Wave: Only Odd Sine Harmonics",
            "description": "An odd square wave has only sine terms with odd k: x(t) = (4/π)Σ sin(kω₀t)/k for k = 1, 3, 5, ...",
            "traces": [
                {
                    "x": [
                        1,
                        2,
                        3,
                        4,
                        5,
                        6,
                        7,
                        8,
                        9
                    ],
                    "y_expr": "[4/Math.PI, 0, 4/(3*Math.PI), 0, 4/(5*Math.PI), 0, 4/(7*Math.PI), 0, 4/(9*Math.PI)]",
                    "type": "bar",
                    "name": "b_k (sine coefficients)",
                    "marker": {
                        "color_expr": "[1,2,3,4,5,6,7,8,9].map(k => k % 2 === 1 ? '#ff6b8a' : '#aab4c0')"
                    }
                }
            ],
            "layout": {
                "xaxis": {
                    "title": "Harmonic k",
                    "dtick": 1
                },
                "yaxis": {
                    "title": "b_k"
                },
                "showlegend": false,
                "annotations": [
                    {
                        "x": 2,
                        "y": 0.05,
                        "text": "Even k = 0!",
                        "showarrow": false,
                        "font": {
                            "size": 11,
                            "color": "#aab4c0"
                        }
                    }
                ]
            }
        },
        {
            "id": "tfs-reconstruction-sim",
            "type": "v3-waveform",
            "title": "Interactive: Build a Signal with Cosines and Sines",
            "description": "Adjust individual a_k and b_k coefficients. Watch the signal update in real time as you add cosine and sine harmonics."
        },
        {
            "id": "orthogonality-explorer-sim",
            "type": "v3-waveform",
            "title": "Interactive: Test Orthogonality by Choosing m and n",
            "description": "Choose m and n, see the product cos(mω₀t)·cos(nω₀t), and verify the integral is zero when m ≠ n."
        },
        {
            "id": "efs-vs-tfs-waveform",
            "type": "plotly",
            "title": "Same Signal, Two Representations",
            "description": "The same periodic signal represented by exponential FS (complex coefficients) and trigonometric FS (real cosines/sines). Both reconstruct identically.",
            "traces": [
                {
                    "x_expr": "Array.from({length: 400}, (_, i) => i * 2 * Math.PI / 400)",
                    "y_expr": "Array.from({length: 400}, (_, i) => { const t = i * 2 * Math.PI / 400; return 0.5 + Math.cos(t) + 0.3*Math.cos(2*t) - 0.5*Math.sin(t) + 0.2*Math.sin(3*t); })",
                    "mode": "lines",
                    "name": "x(t) — both FS forms give this",
                    "line": {
                        "color": "#4f8cff",
                        "width": 2.5
                    }
                }
            ],
            "layout": {
                "xaxis": {
                    "title": "t"
                },
                "yaxis": {
                    "title": "x(t)"
                },
                "showlegend": true,
                "annotations": [
                    {
                        "x": 3,
                        "y": 2,
                        "text": "EFS and TFS are equivalent representations",
                        "showarrow": false,
                        "font": {
                            "size": 12,
                            "color": "#f5a623"
                        }
                    }
                ]
            }
        }
    ]
}