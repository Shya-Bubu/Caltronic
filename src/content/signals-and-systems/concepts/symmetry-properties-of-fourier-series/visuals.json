{
    "visuals": [
        {
            "id": "conjugate-symmetry-diagram",
            "type": "d3-block-diagram",
            "title": "Conjugate Symmetry: X_{−k} = X_k* for Real Signals",
            "description": "For any real-valued signal, negative-k coefficients are the complex conjugate of positive-k coefficients. This means the magnitude spectrum is even and the phase spectrum is odd.",
            "blocks": [
                {
                    "id": "real",
                    "label": "x(t) is real\nx(t) = x(t)*",
                    "x": 220,
                    "y": 30,
                    "width": 200,
                    "height": 55,
                    "fill": "#4f8cff"
                },
                {
                    "id": "mag",
                    "label": "|X_{−k}| = |X_k|\nMagnitude: EVEN",
                    "x": 80,
                    "y": 130,
                    "width": 200,
                    "height": 55,
                    "fill": "#2fbf8f"
                },
                {
                    "id": "phase",
                    "label": "∠X_{−k} = −∠X_k\nPhase: ODD",
                    "x": 360,
                    "y": 130,
                    "width": 200,
                    "height": 55,
                    "fill": "#ff6b8a"
                }
            ],
            "connections": [
                {
                    "from": "real",
                    "to": "mag",
                    "label": "X_{−k} = X_k*"
                },
                {
                    "from": "real",
                    "to": "phase",
                    "label": "X_{−k} = X_k*"
                }
            ]
        },
        {
            "id": "even-signal-waveform",
            "type": "d3-waveform",
            "title": "An Even Signal: x(t) = x(−t)",
            "description": "An even signal is symmetric about t = 0. It looks the same whether you play it forwards or backwards. The cosine is the prototypical even function.",
            "waveType": "cosine",
            "mode": "continuous"
        },
        {
            "id": "odd-signal-waveform",
            "type": "d3-waveform",
            "title": "An Odd Signal: x(t) = −x(−t)",
            "description": "An odd signal is anti-symmetric about t = 0. Flipping it left-to-right also flips it upside-down. The sine is the prototypical odd function.",
            "waveType": "sine",
            "mode": "continuous"
        },
        {
            "id": "real-even-spectrum",
            "type": "plotly",
            "title": "Spectrum of a Real, Even Signal: All Real X_k",
            "description": "The centred square pulse is real and even. Its coefficients are entirely real (no imaginary part) and symmetric about k = 0. No phase plot is needed — all phases are 0 or π.",
            "traces": [
                {
                    "x_expr": "Array.from({length: 21}, (_, i) => i - 10)",
                    "y_expr": "Array.from({length: 21}, (_, i) => { const k = i - 10; if(k === 0) return 0.25; return Math.sin(k * Math.PI / 4) / (k * Math.PI); })",
                    "type": "bar",
                    "name": "X_k (real, even signal)",
                    "marker": {
                        "color": "#4f8cff"
                    }
                }
            ],
            "layout": {
                "xaxis": {
                    "title": "Harmonic k",
                    "dtick": 2
                },
                "yaxis": {
                    "title": "X_k (real)"
                },
                "showlegend": false
            }
        },
        {
            "id": "real-odd-spectrum",
            "type": "plotly",
            "title": "Spectrum of a Real, Odd Signal: Purely Imaginary X_k",
            "description": "A sine-based signal is real and odd. Its coefficients are purely imaginary and anti-symmetric: X_k = −X_{−k}. The DC component X₀ is always zero for odd signals.",
            "traces": [
                {
                    "x": [
                        -5,
                        -3,
                        -1,
                        0,
                        1,
                        3,
                        5
                    ],
                    "y": [
                        0.127,
                        0.212,
                        0.637,
                        0,
                        -0.637,
                        -0.212,
                        -0.127
                    ],
                    "type": "bar",
                    "name": "jIm(X_k) (odd, imaginary)",
                    "marker": {
                        "color": "#ff6b8a"
                    }
                }
            ],
            "layout": {
                "xaxis": {
                    "title": "Harmonic k",
                    "dtick": 1
                },
                "yaxis": {
                    "title": "Im(X_k)"
                },
                "showlegend": false
            }
        },
        {
            "id": "mag-phase-real-signal",
            "type": "plotly",
            "title": "Magnitude & Phase for a General Real Signal",
            "description": "A real (but neither even nor odd) signal. Magnitude spectrum is even (symmetric). Phase spectrum is odd (anti-symmetric). X_k is complex but satisfies X_{−k} = X_k*.",
            "traces": [
                {
                    "x": [
                        -5,
                        -4,
                        -3,
                        -2,
                        -1,
                        0,
                        1,
                        2,
                        3,
                        4,
                        5
                    ],
                    "y": [
                        0.1,
                        0.15,
                        0.25,
                        0.4,
                        0.8,
                        1.5,
                        0.8,
                        0.4,
                        0.25,
                        0.15,
                        0.1
                    ],
                    "type": "bar",
                    "name": "|X_k| (even)",
                    "marker": {
                        "color": "#4f8cff"
                    }
                }
            ],
            "layout": {
                "xaxis": {
                    "title": "Harmonic k",
                    "dtick": 1
                },
                "yaxis": {
                    "title": "|X_k|"
                },
                "showlegend": false
            }
        },
        {
            "id": "symmetry-table-diagram",
            "type": "d3-block-diagram",
            "title": "Complete Symmetry Map",
            "description": "Shows how signal symmetries constrain the FS coefficients. Real → conjugate symmetric. Real + Even → purely real. Real + Odd → purely imaginary, X₀ = 0.",
            "blocks": [
                {
                    "id": "real_sig",
                    "label": "Real Signal\nX_{−k} = X_k*",
                    "x": 230,
                    "y": 20,
                    "width": 200,
                    "height": 50,
                    "fill": "#4f8cff"
                },
                {
                    "id": "real_even",
                    "label": "Real + Even\nX_k real, even",
                    "x": 80,
                    "y": 110,
                    "width": 200,
                    "height": 50,
                    "fill": "#2fbf8f"
                },
                {
                    "id": "real_odd",
                    "label": "Real + Odd\nX_k imaginary, odd\nX₀ = 0",
                    "x": 380,
                    "y": 110,
                    "width": 200,
                    "height": 50,
                    "fill": "#ff6b8a"
                },
                {
                    "id": "general",
                    "label": "General\nX_k = Re + jIm\nSplit into even + odd",
                    "x": 230,
                    "y": 200,
                    "width": 200,
                    "height": 50,
                    "fill": "#f5a623"
                }
            ],
            "connections": [
                {
                    "from": "real_sig",
                    "to": "real_even",
                    "label": "x(t)=x(−t)"
                },
                {
                    "from": "real_sig",
                    "to": "real_odd",
                    "label": "x(t)=−x(−t)"
                },
                {
                    "from": "real_sig",
                    "to": "general",
                    "label": "neither"
                }
            ]
        },
        {
            "id": "even-odd-decomposition",
            "type": "plotly",
            "title": "Even–Odd Decomposition of a Real Signal",
            "description": "Any real signal splits into an even part x_e(t) = [x(t)+x(−t)]/2 and an odd part x_o(t) = [x(t)−x(−t)]/2. The even part produces real FS coefficients; the odd part produces imaginary coefficients.",
            "traces": [
                {
                    "x_expr": "Array.from({length: 200}, (_, i) => -Math.PI + i * 2 * Math.PI / 200)",
                    "y_expr": "Array.from({length: 200}, (_, i) => { const t = -Math.PI + i * 2 * Math.PI / 200; return Math.cos(t) + 0.5*Math.sin(t) + 0.3*Math.cos(3*t); })",
                    "mode": "lines",
                    "name": "x(t)",
                    "line": {
                        "color": "#4f8cff",
                        "width": 2.5
                    }
                },
                {
                    "x_expr": "Array.from({length: 200}, (_, i) => -Math.PI + i * 2 * Math.PI / 200)",
                    "y_expr": "Array.from({length: 200}, (_, i) => { const t = -Math.PI + i * 2 * Math.PI / 200; return Math.cos(t) + 0.3*Math.cos(3*t); })",
                    "mode": "lines",
                    "name": "x_e(t) = even part",
                    "line": {
                        "color": "#2fbf8f",
                        "width": 2,
                        "dash": "dash"
                    }
                },
                {
                    "x_expr": "Array.from({length: 200}, (_, i) => -Math.PI + i * 2 * Math.PI / 200)",
                    "y_expr": "Array.from({length: 200}, (_, i) => { const t = -Math.PI + i * 2 * Math.PI / 200; return 0.5*Math.sin(t); })",
                    "mode": "lines",
                    "name": "x_o(t) = odd part",
                    "line": {
                        "color": "#ff6b8a",
                        "width": 2,
                        "dash": "dot"
                    }
                }
            ],
            "layout": {
                "xaxis": {
                    "title": "t"
                },
                "yaxis": {
                    "title": "Amplitude"
                },
                "showlegend": true
            }
        },
        {
            "id": "symmetry-explorer-sim",
            "type": "d3-simulation",
            "simulationType": "fourier-coefficients",
            "title": "Interactive: See How Symmetry Constrains Coefficients",
            "description": "Choose an even, odd, or general signal. Watch how symmetry forces X_k to be real, imaginary, or complex. Try toggling even/odd components and see the spectrum update."
        },
        {
            "id": "half-integration-diagram",
            "type": "d3-block-diagram",
            "title": "Simplified Integration for Even and Odd Signals",
            "description": "For even signals, the integral reduces to 2× the integral over half a period with a cosine kernel. For odd signals, you get 2× over half with a sine kernel. This halves the computation.",
            "blocks": [
                {
                    "id": "even_int",
                    "label": "Even x(t)\nX_k = (2/T₀)∫₀^{T₀/2} x(t)cos(kω₀t) dt\nAll real",
                    "x": 60,
                    "y": 60,
                    "width": 280,
                    "height": 60,
                    "fill": "#2fbf8f"
                },
                {
                    "id": "odd_int",
                    "label": "Odd x(t)\nX_k = −j(2/T₀)∫₀^{T₀/2} x(t)sin(kω₀t) dt\nAll imaginary",
                    "x": 380,
                    "y": 60,
                    "width": 280,
                    "height": 60,
                    "fill": "#ff6b8a"
                }
            ],
            "connections": []
        }
    ]
}