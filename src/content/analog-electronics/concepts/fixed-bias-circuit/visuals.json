{
    "visuals": [
        {
            "id": "fixed-bias-schematic",
            "type": "plotly",
            "title": "Fixed Bias Circuit — Component Layout",
            "description": "An NPN transistor with emitter grounded. R₁ connects V_CC to the base (bias). R_C connects V_CC to collector (load). Input via C_in.",
            "traces": [
                {
                    "x": [
                        "C_in\n(coupling)",
                        "R₁\n(bias)",
                        "NPN BJT\nQ₁",
                        "R_C\n(load)",
                        "V_CC\n(supply)"
                    ],
                    "y": [
                        1,
                        1,
                        1,
                        1,
                        1
                    ],
                    "type": "bar",
                    "marker": {
                        "color": [
                            "#f5a623",
                            "#6b62ff",
                            "#2fbf8f",
                            "#6b62ff",
                            "#ff6b8a"
                        ]
                    },
                    "text": [
                        "Blocks DC\nPasses AC",
                        "Sets I_B\nfrom V_CC",
                        "Active\nregion",
                        "V_out =\nV_CC−I_C·R_C",
                        "+12V\nDC supply"
                    ],
                    "textposition": "inside",
                    "textfont": {
                        "size": 11,
                        "color": "#ffffff"
                    },
                    "showlegend": false,
                    "hoverinfo": "none"
                }
            ],
            "layout": {
                "xaxis": {
                    "title": "Circuit Components"
                },
                "yaxis": {
                    "visible": false,
                    "range": [
                        0,
                        1.3
                    ]
                },
                "showlegend": false,
                "annotations": [
                    {
                        "x": "R₁\n(bias)",
                        "y": 1.15,
                        "text": "I_B = (V_CC − 0.7)/R₁",
                        "showarrow": false,
                        "font": {
                            "size": 12,
                            "color": "#f5a623"
                        }
                    }
                ]
            },
            "height": 300
        },
        {
            "id": "fixed-bias-be-loop",
            "type": "plotly",
            "title": "KVL: Base-Emitter Loop",
            "description": "V_CC = I_B·R₁ + V_BE. Solving: I_B = (V_CC − 0.7)/R₁.",
            "traces": [
                {
                    "x": [
                        "V_CC",
                        "I_B · R₁",
                        "V_BE ≈ 0.7V",
                        "GND (0V)"
                    ],
                    "y": [
                        12,
                        11.3,
                        0.7,
                        0
                    ],
                    "type": "waterfall",
                    "connector": {
                        "line": {
                            "color": "#4f8cff"
                        }
                    },
                    "decreasing": {
                        "marker": {
                            "color": "#6b62ff"
                        }
                    },
                    "increasing": {
                        "marker": {
                            "color": "#2fbf8f"
                        }
                    },
                    "totals": {
                        "marker": {
                            "color": "#ff6b8a"
                        }
                    },
                    "showlegend": false
                }
            ],
            "layout": {
                "xaxis": {
                    "title": "KVL Path"
                },
                "yaxis": {
                    "title": "Voltage (V)"
                },
                "showlegend": false,
                "annotations": [
                    {
                        "x": "I_B · R₁",
                        "y": 12,
                        "text": "Most of V_CC\ndrops here",
                        "showarrow": true,
                        "arrowhead": 2,
                        "font": {
                            "size": 11,
                            "color": "#f5a623"
                        }
                    }
                ]
            },
            "height": 350
        },
        {
            "id": "fixed-bias-ce-loop",
            "type": "plotly",
            "title": "KVL: Collector-Emitter Loop",
            "description": "V_CC = I_C·R_C + V_CE → V_CE = V_CC − I_C·R_C = V_CC − βI_B·R_C.",
            "traces": [
                {
                    "x": [
                        "V_CC",
                        "I_C · R_C",
                        "V_CE (output)"
                    ],
                    "y": [
                        1,
                        1,
                        1
                    ],
                    "type": "bar",
                    "marker": {
                        "color": [
                            "#ff6b8a",
                            "#6b62ff",
                            "#f5a623"
                        ]
                    },
                    "text": [
                        "12V<br>supply",
                        "βI_B × R_C<br>= 5.28V",
                        "V_CE = 6.72V<br>(Q-point)"
                    ],
                    "textposition": "inside",
                    "textfont": {
                        "size": 12,
                        "color": "#ffffff"
                    },
                    "showlegend": false,
                    "hoverinfo": "none"
                }
            ],
            "layout": {
                "xaxis": {
                    "title": "KVL Components"
                },
                "yaxis": {
                    "visible": false,
                    "range": [
                        0,
                        1.3
                    ]
                },
                "showlegend": false,
                "annotations": [
                    {
                        "x": "V_CE (output)",
                        "y": 1.15,
                        "text": "V_CE = V_CC − I_C·R_C",
                        "showarrow": false,
                        "font": {
                            "size": 12,
                            "color": "#f5a623"
                        }
                    }
                ]
            },
            "height": 280
        },
        {
            "id": "fixed-bias-ib-vs-r1",
            "type": "plotly",
            "title": "Base Current I_B vs Bias Resistor R₁",
            "description": "I_B = (V_CC − 0.7)/R₁ is inversely proportional to R₁. For V_CC = 10 V, increasing R₁ decreases I_B.",
            "traces": [
                {
                    "x_expr": "Array.from({length: 100}, (_, i) => 100 + i * 9)",
                    "y_expr": "Array.from({length: 100}, (_, i) => (10 - 0.7) / (100 + i * 9) * 1000)",
                    "mode": "lines",
                    "name": "I_B (μA) vs R₁ (kΩ)",
                    "line": {
                        "color": "#4f8cff",
                        "width": 2.5
                    }
                }
            ],
            "layout": {
                "xaxis": {
                    "title": "R₁ (kΩ)"
                },
                "yaxis": {
                    "title": "I_B (μA)"
                },
                "showlegend": true
            }
        },
        {
            "id": "fixed-bias-qpoint-calc-flow",
            "type": "plotly",
            "title": "Q-Point Calculation: 3-Step Flow",
            "description": "Step 1: KVL on BE loop → I_B. Step 2: I_C = βI_B. Step 3: KVL on CE loop → V_CE. Q = (V_CEQ, I_CQ).",
            "traces": [
                {
                    "x": [
                        "Step 1:<br>KVL BE loop",
                        "Step 2:<br>Active region",
                        "Step 3:<br>KVL CE loop",
                        "Result:<br>Q-point"
                    ],
                    "y": [
                        1,
                        1,
                        1,
                        1
                    ],
                    "type": "bar",
                    "marker": {
                        "color": [
                            "#4f8cff",
                            "#6b62ff",
                            "#2fbf8f",
                            "#ff6b8a"
                        ]
                    },
                    "text": [
                        "I_B = (V_CC−0.7)/R₁",
                        "I_C = βI_B",
                        "V_CE = V_CC−I_C·R_C",
                        "Q = (V_CEQ, I_CQ)"
                    ],
                    "textposition": "inside",
                    "textfont": {
                        "size": 11,
                        "color": "#ffffff"
                    },
                    "showlegend": false,
                    "hoverinfo": "none"
                }
            ],
            "layout": {
                "xaxis": {
                    "title": "Calculation Sequence"
                },
                "yaxis": {
                    "visible": false,
                    "range": [
                        0,
                        1.3
                    ]
                },
                "showlegend": false
            },
            "height": 280
        },
        {
            "id": "beta-sensitivity-plot",
            "type": "plotly",
            "title": "Q-Point Sensitivity to β — The Fatal Flaw of Fixed Bias",
            "description": "I_C changes linearly with β. If β doubles, I_C doubles and V_CE shifts dramatically.",
            "traces": [
                {
                    "x_expr": "Array.from({length: 200}, (_, i) => 50 + i)",
                    "y_expr": "Array.from({length: 200}, (_, i) => (50 + i) * 0.024)",
                    "mode": "lines",
                    "name": "I_CQ (mA)",
                    "line": {
                        "color": "#ff6b8a",
                        "width": 2.5
                    }
                },
                {
                    "x_expr": "Array.from({length: 200}, (_, i) => 50 + i)",
                    "y_expr": "Array.from({length: 200}, (_, i) => 12 - (50 + i) * 0.024 * 2.2)",
                    "mode": "lines",
                    "name": "V_CEQ (V)",
                    "line": {
                        "color": "#4f8cff",
                        "width": 2.5
                    }
                }
            ],
            "layout": {
                "xaxis": {
                    "title": "β (current gain)"
                },
                "yaxis": {
                    "title": "Value"
                },
                "showlegend": true,
                "annotations": [
                    {
                        "x": 200,
                        "y": 0,
                        "text": "V_CE goes negative → SATURATION!",
                        "showarrow": true,
                        "arrowhead": 2,
                        "font": {
                            "size": 11,
                            "color": "#ff6b8a"
                        }
                    }
                ]
            }
        },
        {
            "id": "fixed-bias-numerical-example",
            "type": "plotly",
            "title": "Worked Example: V_CC = 12V, R₁ = 470kΩ, R_C = 2.2kΩ, β = 100",
            "description": "I_B = 24 μA → I_C = 2.4 mA → V_CE = 6.72 V. Q = (6.72V, 2.4mA).",
            "traces": [
                {
                    "x": [
                        "Given",
                        "I_B",
                        "I_C",
                        "V_CE",
                        "Q-point"
                    ],
                    "y": [
                        1,
                        1,
                        1,
                        1,
                        1
                    ],
                    "type": "bar",
                    "marker": {
                        "color": [
                            "#4f8cff",
                            "#6b62ff",
                            "#2fbf8f",
                            "#f5a623",
                            "#ff6b8a"
                        ]
                    },
                    "text": [
                        "V_CC=12V<br>R₁=470kΩ<br>R_C=2.2kΩ<br>β=100",
                        "(12−0.7)/470k<br>= 24 μA",
                        "100 × 24μA<br>= 2.4 mA",
                        "12−2.4×2.2<br>= 6.72 V",
                        "Q = (6.72V,<br>2.4mA)"
                    ],
                    "textposition": "inside",
                    "textfont": {
                        "size": 10,
                        "color": "#ffffff"
                    },
                    "showlegend": false,
                    "hoverinfo": "none"
                }
            ],
            "layout": {
                "xaxis": {
                    "title": ""
                },
                "yaxis": {
                    "visible": false,
                    "range": [
                        0,
                        1.3
                    ]
                },
                "showlegend": false
            },
            "height": 300
        },
        {
            "id": "qpoint-shift-simulation",
            "type": "v3-load-line",
            "title": "Interactive: Watch the Q-Point Shift with β",
            "description": "Drag the β slider and watch the Q-point move along the load line. In fixed bias, even small β changes cause large Q-point shifts."
        },
        {
            "id": "fixed-bias-advantages-disadvantages",
            "type": "plotly",
            "title": "Fixed Bias: Advantages vs Disadvantages",
            "description": "Simple and easy to calculate, but fatally sensitive to β variations and thermal runaway.",
            "traces": [
                {
                    "x": [
                        "Simple<br>(1 resistor)",
                        "Easy to<br>calculate",
                        "Q-point<br>∝ β",
                        "Thermal<br>runaway risk",
                        "Poor<br>stability"
                    ],
                    "y": [
                        1,
                        1,
                        1,
                        1,
                        1
                    ],
                    "type": "bar",
                    "marker": {
                        "color": [
                            "#2fbf8f",
                            "#2fbf8f",
                            "#ff6b8a",
                            "#ff6b8a",
                            "#ff6b8a"
                        ]
                    },
                    "text": [
                        "Advantage ✓",
                        "Advantage ✓",
                        "Disadvantage ✗",
                        "Disadvantage ✗",
                        "Disadvantage ✗"
                    ],
                    "textposition": "inside",
                    "textfont": {
                        "size": 11,
                        "color": "#ffffff"
                    },
                    "showlegend": false,
                    "hoverinfo": "none"
                }
            ],
            "layout": {
                "xaxis": {
                    "title": ""
                },
                "yaxis": {
                    "visible": false,
                    "range": [
                        0,
                        1.3
                    ]
                },
                "showlegend": false
            },
            "height": 280
        },
        {
            "id": "dc-equivalent-circuit",
            "type": "plotly",
            "title": "DC Equivalent: Open-Circuit Capacitors",
            "description": "To find the Q-point, replace all capacitors with open circuits. The signal source disappears, leaving only the DC bias network.",
            "traces": [
                {
                    "x": [
                        "Full Circuit<br>(with caps, source)",
                        "→ Open-circuit<br>capacitors (ω=0)",
                        "DC Equivalent<br>(bias only)"
                    ],
                    "y": [
                        1,
                        1,
                        1
                    ],
                    "type": "bar",
                    "marker": {
                        "color": [
                            "#4f8cff",
                            "#f5a623",
                            "#2fbf8f"
                        ]
                    },
                    "text": [
                        "C_in, C_out,<br>v_s present",
                        "X_C = 1/(ωC) = ∞<br>at DC",
                        "Only R₁, R_C, BJT<br>Analyse for Q-point"
                    ],
                    "textposition": "inside",
                    "textfont": {
                        "size": 11,
                        "color": "#ffffff"
                    },
                    "showlegend": false,
                    "hoverinfo": "none"
                }
            ],
            "layout": {
                "xaxis": {
                    "title": "Analysis Step"
                },
                "yaxis": {
                    "visible": false,
                    "range": [
                        0,
                        1.3
                    ]
                },
                "showlegend": false
            },
            "height": 280
        }
    ]
}