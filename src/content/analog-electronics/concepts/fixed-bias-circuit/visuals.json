{
    "visuals": [
        {
            "id": "fixed-bias-schematic",
            "type": "d3-block-diagram",
            "title": "Fixed Bias Circuit Schematic",
            "description": "An NPN transistor with the emitter grounded. A single resistor R₁ connects V_CC to the base, providing the DC bias current I_B. The collector is connected to V_CC through R_C. The input signal is coupled through C_in, and the output is taken from the collector.",
            "blocks": [
                {
                    "id": "vcc",
                    "label": "+V_CC",
                    "x": 300,
                    "y": 10,
                    "width": 80,
                    "height": 30,
                    "fill": "#ff6b8a"
                },
                {
                    "id": "r1",
                    "label": "R₁\n(Bias resistor)",
                    "x": 100,
                    "y": 50,
                    "width": 130,
                    "height": 50,
                    "fill": "#6b62ff"
                },
                {
                    "id": "rc",
                    "label": "R_C\n(Load)",
                    "x": 400,
                    "y": 50,
                    "width": 100,
                    "height": 50,
                    "fill": "#6b62ff"
                },
                {
                    "id": "bjt",
                    "label": "NPN BJT\nQ₁",
                    "x": 260,
                    "y": 80,
                    "width": 100,
                    "height": 70,
                    "fill": "#2fbf8f"
                },
                {
                    "id": "cin",
                    "label": "C_in",
                    "x": 30,
                    "y": 100,
                    "width": 60,
                    "height": 35,
                    "fill": "#f5a623"
                },
                {
                    "id": "gnd",
                    "label": "GND",
                    "x": 300,
                    "y": 175,
                    "width": 60,
                    "height": 25,
                    "fill": "#aab4c0"
                }
            ],
            "connections": [
                {
                    "from": "vcc",
                    "to": "r1",
                    "label": "I₁ = I_B"
                },
                {
                    "from": "vcc",
                    "to": "rc"
                },
                {
                    "from": "r1",
                    "to": "bjt",
                    "label": "Base"
                },
                {
                    "from": "rc",
                    "to": "bjt",
                    "label": "Collector"
                },
                {
                    "from": "cin",
                    "to": "bjt"
                },
                {
                    "from": "bjt",
                    "to": "gnd",
                    "label": "Emitter"
                }
            ]
        },
        {
            "id": "fixed-bias-be-loop",
            "type": "d3-block-diagram",
            "title": "KVL Around the Base-Emitter Loop",
            "description": "Starting from V_CC, traversing through R₁ (voltage drop I_B·R₁), then through V_BE (≈ 0.7 V), to ground. KVL: V_CC = I_B·R₁ + V_BE, giving I_B = (V_CC − 0.7)/R₁.",
            "blocks": [
                {
                    "id": "vcc",
                    "label": "V_CC",
                    "x": 40,
                    "y": 70,
                    "width": 80,
                    "height": 40,
                    "fill": "#ff6b8a"
                },
                {
                    "id": "r1drop",
                    "label": "I_B · R₁\n(voltage drop)",
                    "x": 180,
                    "y": 70,
                    "width": 150,
                    "height": 40,
                    "fill": "#6b62ff"
                },
                {
                    "id": "vbe",
                    "label": "V_BE ≈ 0.7 V",
                    "x": 390,
                    "y": 70,
                    "width": 130,
                    "height": 40,
                    "fill": "#2fbf8f"
                },
                {
                    "id": "gnd",
                    "label": "GND (0 V)",
                    "x": 570,
                    "y": 70,
                    "width": 100,
                    "height": 40,
                    "fill": "#aab4c0"
                }
            ],
            "connections": [
                {
                    "from": "vcc",
                    "to": "r1drop",
                    "label": "→"
                },
                {
                    "from": "r1drop",
                    "to": "vbe",
                    "label": "→"
                },
                {
                    "from": "vbe",
                    "to": "gnd",
                    "label": "→"
                }
            ]
        },
        {
            "id": "fixed-bias-ce-loop",
            "type": "d3-block-diagram",
            "title": "KVL Around the Collector-Emitter Loop",
            "description": "Starting from V_CC, through R_C (drop I_C·R_C), then V_CE, to ground. KVL: V_CC = I_C·R_C + V_CE, giving V_CE = V_CC − I_C·R_C = V_CC − βI_B·R_C.",
            "blocks": [
                {
                    "id": "vcc",
                    "label": "V_CC",
                    "x": 40,
                    "y": 70,
                    "width": 80,
                    "height": 40,
                    "fill": "#ff6b8a"
                },
                {
                    "id": "rcdrop",
                    "label": "I_C · R_C\n= βI_B · R_C",
                    "x": 180,
                    "y": 70,
                    "width": 160,
                    "height": 40,
                    "fill": "#6b62ff"
                },
                {
                    "id": "vce",
                    "label": "V_CE\n(output)",
                    "x": 400,
                    "y": 70,
                    "width": 120,
                    "height": 40,
                    "fill": "#f5a623"
                },
                {
                    "id": "gnd",
                    "label": "GND",
                    "x": 570,
                    "y": 70,
                    "width": 70,
                    "height": 40,
                    "fill": "#aab4c0"
                }
            ],
            "connections": [
                {
                    "from": "vcc",
                    "to": "rcdrop",
                    "label": "→"
                },
                {
                    "from": "rcdrop",
                    "to": "vce",
                    "label": "→"
                },
                {
                    "from": "vce",
                    "to": "gnd",
                    "label": "→"
                }
            ]
        },
        {
            "id": "fixed-bias-ib-vs-r1",
            "type": "plotly",
            "title": "Base Current I_B vs Bias Resistor R₁",
            "description": "I_B = (V_CC − 0.7)/R₁ is inversely proportional to R₁. For V_CC = 10 V, increasing R₁ from 100 kΩ to 1 MΩ decreases I_B from 93 μA to 9.3 μA.",
            "traces": [
                {
                    "x_expr": "Array.from({length: 100}, (_, i) => 100 + i * 9)",
                    "y_expr": "Array.from({length: 100}, (_, i) => (10 - 0.7) / (100 + i * 9) * 1000)",
                    "mode": "lines",
                    "name": "I_B (μA) vs R₁ (kΩ)",
                    "line": {
                        "color": "#4f8cff",
                        "width": 2.5
                    }
                }
            ],
            "layout": {
                "xaxis": {
                    "title": "R₁ (kΩ)"
                },
                "yaxis": {
                    "title": "I_B (μA)"
                },
                "showlegend": true
            }
        },
        {
            "id": "fixed-bias-qpoint-calc-flow",
            "type": "d3-block-diagram",
            "title": "Step-by-Step Q-Point Calculation Flow",
            "description": "The complete calculation sequence: (1) Apply KVL to BE loop → find I_B. (2) Use I_C = βI_B. (3) Apply KVL to CE loop → find V_CE. (4) Q-point = (V_CEQ, I_CQ).",
            "blocks": [
                {
                    "id": "step1",
                    "label": "Step 1: KVL BE loop\nI_B = (V_CC − 0.7)/R₁",
                    "x": 40,
                    "y": 30,
                    "width": 230,
                    "height": 50,
                    "fill": "#4f8cff"
                },
                {
                    "id": "step2",
                    "label": "Step 2: Active region\nI_C = βI_B",
                    "x": 40,
                    "y": 110,
                    "width": 230,
                    "height": 50,
                    "fill": "#6b62ff"
                },
                {
                    "id": "step3",
                    "label": "Step 3: KVL CE loop\nV_CE = V_CC − I_C·R_C",
                    "x": 320,
                    "y": 110,
                    "width": 240,
                    "height": 50,
                    "fill": "#2fbf8f"
                },
                {
                    "id": "step4",
                    "label": "Q-point = (V_CEQ, I_CQ)",
                    "x": 320,
                    "y": 30,
                    "width": 240,
                    "height": 50,
                    "fill": "#ff6b8a"
                }
            ],
            "connections": [
                {
                    "from": "step1",
                    "to": "step2",
                    "label": "I_B known"
                },
                {
                    "from": "step2",
                    "to": "step3",
                    "label": "I_C known"
                },
                {
                    "from": "step3",
                    "to": "step4",
                    "label": "V_CE known"
                }
            ]
        },
        {
            "id": "beta-sensitivity-plot",
            "type": "plotly",
            "title": "Q-Point Sensitivity to β Variation",
            "description": "In fixed bias, I_B is constant (independent of β), so I_C = βI_B changes linearly with β. If β doubles from 100 to 200, I_C doubles and V_CE shifts dramatically. This makes the Q-point highly unstable.",
            "traces": [
                {
                    "x_expr": "Array.from({length: 200}, (_, i) => 50 + i)",
                    "y_expr": "Array.from({length: 200}, (_, i) => (50 + i) * 0.01)",
                    "mode": "lines",
                    "name": "I_CQ (mA) — fixed bias",
                    "line": {
                        "color": "#ff6b8a",
                        "width": 2.5
                    }
                },
                {
                    "x_expr": "Array.from({length: 200}, (_, i) => 50 + i)",
                    "y_expr": "Array.from({length: 200}, (_, i) => 10 - (50 + i) * 0.01 * 10)",
                    "mode": "lines",
                    "name": "V_CEQ (V) — fixed bias",
                    "line": {
                        "color": "#4f8cff",
                        "width": 2.5
                    }
                }
            ],
            "layout": {
                "xaxis": {
                    "title": "β (current gain)"
                },
                "yaxis": {
                    "title": "Value"
                },
                "showlegend": true
            }
        },
        {
            "id": "fixed-bias-numerical-example",
            "type": "d3-block-diagram",
            "title": "Worked Example: Fixed Bias with V_CC = 12 V",
            "description": "Given: V_CC = 12 V, R₁ = 470 kΩ, R_C = 2.2 kΩ, β = 100. Result: I_B = 24 μA, I_C = 2.4 mA, V_CE = 6.72 V. Q-point = (6.72 V, 2.4 mA).",
            "blocks": [
                {
                    "id": "given",
                    "label": "Given:\nV_CC = 12 V\nR₁ = 470 kΩ\nR_C = 2.2 kΩ\nβ = 100",
                    "x": 40,
                    "y": 30,
                    "width": 180,
                    "height": 100,
                    "fill": "#4f8cff"
                },
                {
                    "id": "ib",
                    "label": "I_B = (12 − 0.7)/470k\n= 24 μA",
                    "x": 270,
                    "y": 30,
                    "width": 200,
                    "height": 45,
                    "fill": "#6b62ff"
                },
                {
                    "id": "ic",
                    "label": "I_C = 100 × 24 μA\n= 2.4 mA",
                    "x": 270,
                    "y": 90,
                    "width": 200,
                    "height": 45,
                    "fill": "#2fbf8f"
                },
                {
                    "id": "vce",
                    "label": "V_CE = 12 − 2.4 × 2.2\n= 6.72 V",
                    "x": 520,
                    "y": 30,
                    "width": 200,
                    "height": 45,
                    "fill": "#f5a623"
                },
                {
                    "id": "qpt",
                    "label": "Q = (6.72 V, 2.4 mA)",
                    "x": 520,
                    "y": 90,
                    "width": 200,
                    "height": 45,
                    "fill": "#ff6b8a"
                }
            ],
            "connections": [
                {
                    "from": "given",
                    "to": "ib"
                },
                {
                    "from": "ib",
                    "to": "ic"
                },
                {
                    "from": "ic",
                    "to": "vce"
                },
                {
                    "from": "vce",
                    "to": "qpt"
                }
            ]
        },
        {
            "id": "qpoint-shift-simulation",
            "type": "d3-simulation",
            "simulationType": "parameter-sweep",
            "title": "Interactive: Watch the Q-Point Shift with β",
            "description": "Drag the β slider from 50 to 300 and watch how the Q-point moves along the load line. In fixed bias, the Q-point is extremely sensitive to β — replace the transistor and the bias changes completely."
        },
        {
            "id": "fixed-bias-advantages-disadvantages",
            "type": "d3-block-diagram",
            "title": "Fixed Bias: Pros and Cons",
            "description": "Advantages: simple (one resistor), easy to calculate. Disadvantages: Q-point is highly sensitive to β (which varies with temperature and between transistors), risk of thermal runaway, poor stability.",
            "blocks": [
                {
                    "id": "pros",
                    "label": "ADVANTAGES\n✓ Simple — one resistor\n✓ Easy to calculate\n✓ Low component count",
                    "x": 40,
                    "y": 40,
                    "width": 250,
                    "height": 80,
                    "fill": "#2fbf8f"
                },
                {
                    "id": "cons",
                    "label": "DISADVANTAGES\n✗ Q-point depends on β\n✗ β varies with temperature\n✗ Risk of thermal runaway\n✗ Poor stability",
                    "x": 340,
                    "y": 40,
                    "width": 280,
                    "height": 80,
                    "fill": "#ff6b8a"
                }
            ],
            "connections": []
        },
        {
            "id": "dc-equivalent-circuit",
            "type": "d3-block-diagram",
            "title": "DC Equivalent Circuit: Capacitors Open-Circuited",
            "description": "To find the Q-point, replace all capacitors with open circuits (X_C → ∞ at DC). The signal source disappears, leaving only the DC bias network. This is the circuit you analyse for biasing.",
            "blocks": [
                {
                    "id": "full",
                    "label": "Full Circuit\n(with C_in, C_out, v_s)",
                    "x": 40,
                    "y": 60,
                    "width": 210,
                    "height": 55,
                    "fill": "#4f8cff"
                },
                {
                    "id": "arrow",
                    "label": "Open-circuit\ncapacitors\n(ω = 0)",
                    "x": 290,
                    "y": 60,
                    "width": 140,
                    "height": 55,
                    "fill": "#f5a623"
                },
                {
                    "id": "dc_eq",
                    "label": "DC Equivalent\n(only bias components)\nAnalyse this for Q-point",
                    "x": 480,
                    "y": 60,
                    "width": 230,
                    "height": 55,
                    "fill": "#2fbf8f"
                }
            ],
            "connections": [
                {
                    "from": "full",
                    "to": "arrow"
                },
                {
                    "from": "arrow",
                    "to": "dc_eq"
                }
            ]
        }
    ]
}