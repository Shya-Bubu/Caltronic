{
    "visuals": [
        {
            "id": "dc-load-line-derivation",
            "type": "plotly",
            "title": "Deriving the DC Load Line from KVL",
            "description": "KVL: V_CC = I_C(R_C+R_E) + V_CE → I_C = −V_CE/(R_C+R_E) + V_CC/(R_C+R_E). A straight line on I_C vs V_CE.",
            "traces": [
                {
                    "x": [
                        "KVL Equation",
                        "Approximation",
                        "Result"
                    ],
                    "y": [
                        1,
                        1,
                        1
                    ],
                    "type": "bar",
                    "marker": {
                        "color": [
                            "#4f8cff",
                            "#6b62ff",
                            "#2fbf8f"
                        ]
                    },
                    "text": [
                        "V_CC = I_C·R_C<br>+ V_CE + I_E·R_E",
                        "Since I_E ≈ I_C:<br>V_CC = I_C(R_C+R_E)<br>+ V_CE",
                        "Slope = −1/(R_C+R_E)<br>y-int = V_CC/(R_C+R_E)<br>x-int = V_CC"
                    ],
                    "textposition": "inside",
                    "textfont": {
                        "size": 10,
                        "color": "#ffffff"
                    },
                    "showlegend": false,
                    "hoverinfo": "none"
                }
            ],
            "layout": {
                "xaxis": {
                    "title": ""
                },
                "yaxis": {
                    "visible": false,
                    "range": [
                        0,
                        1.3
                    ]
                },
                "showlegend": false
            },
            "height": 280
        },
        {
            "id": "dc-load-line-on-chars",
            "type": "plotly",
            "title": "DC Load Line on Output Characteristics",
            "description": "The DC load line from (V_CC, 0) to (0, V_CC/(R_C+R_E)). The Q-point is at the intersection with the I_BQ curve.",
            "traces": [
                {
                    "x": [
                        0,
                        10
                    ],
                    "y": [
                        0.000333,
                        0
                    ],
                    "mode": "lines",
                    "name": "DC Load Line",
                    "line": {
                        "color": "#2fbf8f",
                        "width": 3
                    }
                },
                {
                    "x_expr": "Array.from({length: 100}, (_, i) => i * 0.12)",
                    "y_expr": "Array.from({length: 100}, (_, i) => { const v = i * 0.12; if(v < 0.2) return 205e-6 * v / 0.2; return 205e-6; })",
                    "mode": "lines",
                    "name": "I_B = 4.1 μA (β=50)",
                    "line": {
                        "color": "#aab4c0",
                        "width": 1.5
                    }
                },
                {
                    "x_expr": "Array.from({length: 100}, (_, i) => i * 0.12)",
                    "y_expr": "Array.from({length: 100}, (_, i) => { const v = i * 0.12; if(v < 0.2) return 400e-6 * v / 0.2; return 400e-6; })",
                    "mode": "lines",
                    "name": "I_B = 8 μA",
                    "line": {
                        "color": "#c0c0c0",
                        "width": 1
                    }
                },
                {
                    "x": [
                        3.85
                    ],
                    "y": [
                        0.000205
                    ],
                    "mode": "markers",
                    "name": "Q-point (3.85V, 205μA)",
                    "marker": {
                        "size": 14,
                        "color": "#ff6b8a",
                        "symbol": "star"
                    }
                }
            ],
            "layout": {
                "xaxis": {
                    "title": "V_CE (V)",
                    "range": [
                        0,
                        12
                    ]
                },
                "yaxis": {
                    "title": "I_C (A)"
                },
                "showlegend": true
            }
        },
        {
            "id": "dc-load-line-endpoints",
            "type": "plotly",
            "title": "Two-Point Method for Drawing the DC Load Line",
            "description": "Point 1: I_C = 0 → V_CE = V_CC. Point 2: V_CE = 0 → I_C = V_CC/(R_C+R_E). Connect with a line.",
            "traces": [
                {
                    "x": [
                        "Point 1:\nI_C = 0",
                        "Point 2:\nV_CE = 0"
                    ],
                    "y": [
                        1,
                        1
                    ],
                    "type": "bar",
                    "marker": {
                        "color": [
                            "#4f8cff",
                            "#ff6b8a"
                        ]
                    },
                    "text": [
                        "V_CE = V_CC<br>(cutoff: all voltage<br>across transistor)",
                        "I_C = V_CC/(R_C+R_E)<br>(max possible<br>current)"
                    ],
                    "textposition": "inside",
                    "textfont": {
                        "size": 11,
                        "color": "#ffffff"
                    },
                    "showlegend": false,
                    "hoverinfo": "none"
                }
            ],
            "layout": {
                "xaxis": {
                    "title": "Two intercepts → draw straight line"
                },
                "yaxis": {
                    "visible": false,
                    "range": [
                        0,
                        1.3
                    ]
                },
                "showlegend": false
            },
            "height": 280
        },
        {
            "id": "ac-equivalent-circuit",
            "type": "plotly",
            "title": "AC Equivalent Circuit Rules",
            "description": "Short capacitors, short V_CC to ground, open current sources. What remains is the AC signal path.",
            "traces": [
                {
                    "x": [
                        "Full Circuit",
                        "→ AC Rules →",
                        "AC Equivalent"
                    ],
                    "y": [
                        1,
                        1,
                        1
                    ],
                    "type": "bar",
                    "marker": {
                        "color": [
                            "#4f8cff",
                            "#f5a623",
                            "#2fbf8f"
                        ]
                    },
                    "text": [
                        "DC + AC<br>components",
                        "• Short caps<br>• Short V_CC→GND<br>• Keep signal",
                        "R₁‖R₂ at base<br>R_C to GND<br>R_E₁ in emitter"
                    ],
                    "textposition": "inside",
                    "textfont": {
                        "size": 10,
                        "color": "#ffffff"
                    },
                    "showlegend": false,
                    "hoverinfo": "none"
                }
            ],
            "layout": {
                "xaxis": {
                    "title": ""
                },
                "yaxis": {
                    "visible": false,
                    "range": [
                        0,
                        1.3
                    ]
                },
                "showlegend": false
            },
            "height": 280
        },
        {
            "id": "ac-load-line-derivation",
            "type": "plotly",
            "title": "AC Load Line: Steeper Slope",
            "description": "AC KVL: i_c(R_C + r_e₁) + v_ce = 0. Slope = −1/(R_C + r_e₁) — steeper than DC because bypass cap removes R_E₂.",
            "traces": [
                {
                    "x": [
                        "AC KVL",
                        "Result"
                    ],
                    "y": [
                        1,
                        1
                    ],
                    "type": "bar",
                    "marker": {
                        "color": [
                            "#4f8cff",
                            "#2fbf8f"
                        ]
                    },
                    "text": [
                        "i_c·R_C + v_ce<br>+ i_e·r_e₁ = 0<br>(No V_CC, caps shorted)",
                        "Slope = −1/(R_C+r_e₁)<br>Steeper than DC!<br>Passes through Q-point"
                    ],
                    "textposition": "inside",
                    "textfont": {
                        "size": 10,
                        "color": "#ffffff"
                    },
                    "showlegend": false,
                    "hoverinfo": "none"
                }
            ],
            "layout": {
                "xaxis": {
                    "title": ""
                },
                "yaxis": {
                    "visible": false,
                    "range": [
                        0,
                        1.3
                    ]
                },
                "showlegend": false
            },
            "height": 260
        },
        {
            "id": "dc-vs-ac-load-lines",
            "type": "plotly",
            "title": "DC Load Line vs AC Load Line",
            "description": "Both pass through the Q-point. The AC line is steeper. The signal swings along the AC load line.",
            "traces": [
                {
                    "x": [
                        0,
                        10
                    ],
                    "y": [
                        0.000333,
                        0
                    ],
                    "mode": "lines",
                    "name": "DC Load Line (slope = −1/30k)",
                    "line": {
                        "color": "#2fbf8f",
                        "width": 2.5,
                        "dash": "dash"
                    }
                },
                {
                    "x_expr": "Array.from({length: 100}, (_, i) => i * 0.1)",
                    "y_expr": "Array.from({length: 100}, (_, i) => { const v = i * 0.1; return 205e-6 + (3.85 - v) / 10240; })",
                    "mode": "lines",
                    "name": "AC Load Line (slope = −1/10.24k)",
                    "line": {
                        "color": "#ff6b8a",
                        "width": 3
                    }
                },
                {
                    "x": [
                        3.85
                    ],
                    "y": [
                        0.000205
                    ],
                    "mode": "markers",
                    "name": "Q-point",
                    "marker": {
                        "size": 14,
                        "color": "#f5a623",
                        "symbol": "star"
                    }
                }
            ],
            "layout": {
                "xaxis": {
                    "title": "V_CE (V)",
                    "range": [
                        0,
                        10
                    ]
                },
                "yaxis": {
                    "title": "I_C (A)"
                },
                "showlegend": true
            }
        },
        {
            "id": "signal-swing-regions",
            "type": "plotly",
            "title": "Signal Swing Limits: Saturation and Cutoff",
            "description": "The signal swings along the AC load line. Clipping occurs if it hits saturation (V_CE ≈ 0.2V) or cutoff (I_C = 0).",
            "traces": [
                {
                    "x": [
                        0.2,
                        0.2
                    ],
                    "y": [
                        0,
                        0.001
                    ],
                    "mode": "lines",
                    "name": "Saturation boundary",
                    "line": {
                        "color": "#ff6b8a",
                        "width": 2,
                        "dash": "dot"
                    }
                },
                {
                    "x": [
                        0,
                        10
                    ],
                    "y": [
                        0,
                        0
                    ],
                    "mode": "lines",
                    "name": "Cutoff (I_C = 0)",
                    "line": {
                        "color": "#4f8cff",
                        "width": 2,
                        "dash": "dot"
                    }
                },
                {
                    "x_expr": "Array.from({length: 100}, (_, i) => 0.2 + i * 0.095)",
                    "y_expr": "Array.from({length: 100}, (_, i) => { const v = 0.2 + i * 0.095; return 205e-6 + (3.85 - v) / 10240; })",
                    "mode": "lines",
                    "name": "AC Load Line",
                    "line": {
                        "color": "#2fbf8f",
                        "width": 2.5
                    }
                },
                {
                    "x": [
                        3.85
                    ],
                    "y": [
                        0.000205
                    ],
                    "mode": "markers",
                    "name": "Q-point",
                    "marker": {
                        "size": 12,
                        "color": "#f5a623",
                        "symbol": "star"
                    }
                }
            ],
            "layout": {
                "xaxis": {
                    "title": "V_CE (V)",
                    "range": [
                        0,
                        10
                    ]
                },
                "yaxis": {
                    "title": "I_C (A)"
                },
                "showlegend": true
            }
        },
        {
            "id": "properly-biased-check",
            "type": "plotly",
            "title": "Is the Circuit Properly Biased?",
            "description": "If the signal can swing without hitting saturation or cutoff → properly biased. Otherwise → redesign.",
            "traces": [
                {
                    "x": [
                        "Q-point on<br>AC load line",
                        "Can signal<br>swing freely?",
                        "YES →<br>Proper bias ✓",
                        "NO →<br>Clipping ✗"
                    ],
                    "y": [
                        1,
                        1,
                        1,
                        1
                    ],
                    "type": "bar",
                    "marker": {
                        "color": [
                            "#f5a623",
                            "#6b62ff",
                            "#2fbf8f",
                            "#ff6b8a"
                        ]
                    },
                    "text": [
                        "Start here",
                        "Check both<br>directions",
                        "Full<br>amplification",
                        "Redesign bias<br>or reduce signal"
                    ],
                    "textposition": "inside",
                    "textfont": {
                        "size": 10,
                        "color": "#ffffff"
                    },
                    "showlegend": false,
                    "hoverinfo": "none"
                }
            ],
            "layout": {
                "xaxis": {
                    "title": ""
                },
                "yaxis": {
                    "visible": false,
                    "range": [
                        0,
                        1.3
                    ]
                },
                "showlegend": false
            },
            "height": 280
        },
        {
            "id": "load-line-sim",
            "type": "v3-load-line",
            "title": "Interactive: Draw Load Lines and Watch Signal Swing",
            "description": "Adjust R_C, R_E, V_CC. Set Q-point. Apply a signal and watch the operating point track along the AC load line."
        },
        {
            "id": "dc-vs-ac-summary-table",
            "type": "plotly",
            "title": "DC vs AC Load Lines — Summary Comparison",
            "description": "DC load line determines Q-point. AC load line determines signal swing. Signal travels along the AC line.",
            "traces": [
                {
                    "x": [
                        "Slope",
                        "Purpose",
                        "Signal travels along"
                    ],
                    "y": [
                        1,
                        1,
                        1
                    ],
                    "name": "DC Load Line",
                    "type": "bar",
                    "marker": {
                        "color": "#2fbf8f"
                    },
                    "text": [
                        "−1/(R_C+R_E)<br>(gentler)",
                        "Find<br>Q-point",
                        "No — DC only<br>sets bias"
                    ],
                    "textposition": "inside",
                    "textfont": {
                        "size": 10,
                        "color": "#ffffff"
                    }
                },
                {
                    "x": [
                        "Slope",
                        "Purpose",
                        "Signal travels along"
                    ],
                    "y": [
                        1,
                        1,
                        1
                    ],
                    "name": "AC Load Line",
                    "type": "bar",
                    "marker": {
                        "color": "#ff6b8a"
                    },
                    "text": [
                        "−1/(R_C+r_e₁)<br>(steeper)",
                        "Signal<br>swing limits",
                        "YES — signal<br>traces this line!"
                    ],
                    "textposition": "inside",
                    "textfont": {
                        "size": 10,
                        "color": "#ffffff"
                    }
                }
            ],
            "layout": {
                "xaxis": {
                    "title": ""
                },
                "yaxis": {
                    "visible": false,
                    "range": [
                        0,
                        2.2
                    ]
                },
                "barmode": "stack",
                "showlegend": true
            },
            "height": 320
        }
    ]
}