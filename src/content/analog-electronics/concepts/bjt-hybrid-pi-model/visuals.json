{
    "visuals": [
        {
            "id": "h-parameter-full-model",
            "type": "plotly",
            "title": "General h-Parameter Two-Port Model",
            "description": "Four h-parameters: h_ie (input impedance), h_re (reverse feedback ≈ 0), h_fe (forward gain = β), h_oe (output admittance ≈ 0).",
            "traces": [
                {
                    "x": [
                        "h_ie = r_π\n(input Z)",
                        "h_re · v_ce\n(≈ 0, neglect)",
                        "h_fe · i_b = β·i_b\n(forward gain)",
                        "1/h_oe = R_out\n(≈ ∞, neglect)"
                    ],
                    "y": [
                        1,
                        1,
                        1,
                        1
                    ],
                    "type": "bar",
                    "marker": {
                        "color": [
                            "#4f8cff",
                            "#aab4c0",
                            "#2fbf8f",
                            "#aab4c0"
                        ]
                    },
                    "text": [
                        "INPUT SIDE<br>Keep ✓",
                        "INPUT SIDE<br>Drop (≈0) ✗",
                        "OUTPUT SIDE<br>Keep ✓",
                        "OUTPUT SIDE<br>Drop (≈∞) ✗"
                    ],
                    "textposition": "inside",
                    "textfont": {
                        "size": 10,
                        "color": "#ffffff"
                    },
                    "showlegend": false,
                    "hoverinfo": "none"
                }
            ],
            "layout": {
                "xaxis": {
                    "title": "h-Parameters"
                },
                "yaxis": {
                    "visible": false,
                    "range": [
                        0,
                        1.3
                    ]
                },
                "showlegend": false,
                "annotations": [
                    {
                        "x": "h_re · v_ce\n(≈ 0, neglect)",
                        "y": 1.15,
                        "text": "Greyed = neglected in hybrid-π",
                        "showarrow": false,
                        "font": {
                            "size": 11,
                            "color": "#aab4c0"
                        }
                    }
                ]
            },
            "height": 300
        },
        {
            "id": "hybrid-pi-circuit",
            "type": "plotly",
            "title": "The Hybrid-π Model (Simplified 3-Parameter)",
            "description": "After dropping h_re and h_oe: r_π between base-emitter, β·i_b current source from collector to emitter.",
            "traces": [
                {
                    "x": [
                        "B (Base)",
                        "r_π = h_ie",
                        "E (Emitter)",
                        "β · i_b (CCCS)",
                        "C (Collector)"
                    ],
                    "y": [
                        1,
                        1,
                        1,
                        1,
                        1
                    ],
                    "type": "bar",
                    "marker": {
                        "color": [
                            "#f5a623",
                            "#4f8cff",
                            "#f5a623",
                            "#2fbf8f",
                            "#f5a623"
                        ]
                    },
                    "text": [
                        "Input<br>terminal",
                        "Input<br>resistance<br>v_be = i_b·r_π",
                        "Common<br>terminal",
                        "Current-controlled<br>current source<br>i_c = β·i_b",
                        "Output<br>terminal"
                    ],
                    "textposition": "inside",
                    "textfont": {
                        "size": 10,
                        "color": "#ffffff"
                    },
                    "showlegend": false,
                    "hoverinfo": "none"
                }
            ],
            "layout": {
                "xaxis": {
                    "title": "Hybrid-π Model Elements"
                },
                "yaxis": {
                    "visible": false,
                    "range": [
                        0,
                        1.3
                    ]
                },
                "showlegend": false,
                "annotations": [
                    {
                        "x": "r_π = h_ie",
                        "y": 1.15,
                        "text": "r_π = βV_T/I_CQ",
                        "showarrow": false,
                        "font": {
                            "size": 12,
                            "color": "#4f8cff"
                        }
                    },
                    {
                        "x": "β · i_b (CCCS)",
                        "y": 1.15,
                        "text": "or g_m · v_be (VCCS)",
                        "showarrow": false,
                        "font": {
                            "size": 12,
                            "color": "#2fbf8f"
                        }
                    }
                ]
            },
            "height": 300
        },
        {
            "id": "vccs-conversion",
            "type": "plotly",
            "title": "CCCS → VCCS: Introducing Transconductance g_m",
            "description": "Since i_b = v_be/r_π: β·i_b = β·v_be/r_π = g_m·v_be. g_m = β/r_π = I_CQ/V_T (β-independent!).",
            "traces": [
                {
                    "x": [
                        "CCCS Form",
                        "→ Substitute →",
                        "VCCS Form"
                    ],
                    "y": [
                        1,
                        1,
                        1
                    ],
                    "type": "bar",
                    "marker": {
                        "color": [
                            "#4f8cff",
                            "#f5a623",
                            "#2fbf8f"
                        ]
                    },
                    "text": [
                        "i_c = β · i_b<br>= β · (v_be/r_π)",
                        "Define:<br>g_m = β/r_π<br>= I_CQ/V_T",
                        "i_c = g_m · v_be<br>g_m is<br>β-INDEPENDENT!"
                    ],
                    "textposition": "inside",
                    "textfont": {
                        "size": 10,
                        "color": "#ffffff"
                    },
                    "showlegend": false,
                    "hoverinfo": "none"
                }
            ],
            "layout": {
                "xaxis": {
                    "title": ""
                },
                "yaxis": {
                    "visible": false,
                    "range": [
                        0,
                        1.3
                    ]
                },
                "showlegend": false
            },
            "height": 280
        },
        {
            "id": "gm-vs-ic-plot",
            "type": "plotly",
            "title": "Transconductance g_m vs I_CQ",
            "description": "g_m = I_CQ/V_T. Linear with I_CQ. At 1 mA: g_m = 38.5 mA/V. At 10 mA: g_m = 385 mA/V.",
            "traces": [
                {
                    "x_expr": "Array.from({length: 100}, (_, i) => 0.1 + i * 0.1)",
                    "y_expr": "Array.from({length: 100}, (_, i) => (0.1 + i * 0.1) / 0.026)",
                    "mode": "lines",
                    "name": "g_m (mA/V) at 27°C",
                    "line": {
                        "color": "#2fbf8f",
                        "width": 2.5
                    }
                }
            ],
            "layout": {
                "xaxis": {
                    "title": "I_CQ (mA)"
                },
                "yaxis": {
                    "title": "g_m (mA/V)"
                },
                "showlegend": true
            }
        },
        {
            "id": "rpi-vs-ic-plot",
            "type": "plotly",
            "title": "r_π vs I_CQ (for different β values)",
            "description": "r_π = βV_T/I_CQ. Decreases with I_CQ, increases with β.",
            "traces": [
                {
                    "x_expr": "Array.from({length: 100}, (_, i) => 0.1 + i * 0.1)",
                    "y_expr": "Array.from({length: 100}, (_, i) => 100 * 0.026 / (0.1 + i * 0.1))",
                    "mode": "lines",
                    "name": "r_π (kΩ), β = 100",
                    "line": {
                        "color": "#4f8cff",
                        "width": 2.5
                    }
                },
                {
                    "x_expr": "Array.from({length: 100}, (_, i) => 0.1 + i * 0.1)",
                    "y_expr": "Array.from({length: 100}, (_, i) => 200 * 0.026 / (0.1 + i * 0.1))",
                    "mode": "lines",
                    "name": "r_π (kΩ), β = 200",
                    "line": {
                        "color": "#ff6b8a",
                        "width": 2
                    }
                }
            ],
            "layout": {
                "xaxis": {
                    "title": "I_CQ (mA)"
                },
                "yaxis": {
                    "title": "r_π (kΩ)"
                },
                "showlegend": true
            }
        },
        {
            "id": "parameter-relationships",
            "type": "plotly",
            "title": "Key Parameter Relationships",
            "description": "g_m = I_CQ/V_T (β-independent!), r_π = β/g_m, r_e = 1/g_m ≈ 26mV/I_CQ, r_π = β·r_e.",
            "traces": [
                {
                    "x": [
                        "g_m = I_CQ/V_T",
                        "r_π = β/g_m",
                        "r_e = 1/g_m",
                        "r_π = β · r_e"
                    ],
                    "y": [
                        1,
                        1,
                        1,
                        1
                    ],
                    "type": "bar",
                    "marker": {
                        "color": [
                            "#2fbf8f",
                            "#4f8cff",
                            "#f5a623",
                            "#6b62ff"
                        ]
                    },
                    "text": [
                        "Transconductance<br>β-independent!",
                        "Input resistance<br>= βV_T/I_CQ",
                        "Emitter resistance<br>≈ 26mV/I_CQ",
                        "Linking<br>relationship"
                    ],
                    "textposition": "inside",
                    "textfont": {
                        "size": 10,
                        "color": "#ffffff"
                    },
                    "showlegend": false,
                    "hoverinfo": "none"
                }
            ],
            "layout": {
                "xaxis": {
                    "title": "Small-Signal Parameters"
                },
                "yaxis": {
                    "visible": false,
                    "range": [
                        0,
                        1.3
                    ]
                },
                "showlegend": false
            },
            "height": 280
        },
        {
            "id": "simplified-hybrid-pi",
            "type": "plotly",
            "title": "Simplified Model: Just r_π + g_m·v_be",
            "description": "When R_out >> R_L (almost always): drop R_out. Model = r_π (resistor) + g_m·v_be (VCCS). That's it.",
            "traces": [
                {
                    "x": [
                        "B →",
                        "r_π",
                        "→ E",
                        "g_m · v_be",
                        "→ C"
                    ],
                    "y": [
                        1,
                        1,
                        1,
                        1,
                        1
                    ],
                    "type": "bar",
                    "marker": {
                        "color": [
                            "#f5a623",
                            "#4f8cff",
                            "#f5a623",
                            "#2fbf8f",
                            "#f5a623"
                        ]
                    },
                    "text": [
                        "Base<br>input",
                        "Resistor<br>v_be across it",
                        "Emitter<br>common",
                        "VCCS<br>i_c = g_m·v_be",
                        "Collector<br>output"
                    ],
                    "textposition": "inside",
                    "textfont": {
                        "size": 10,
                        "color": "#ffffff"
                    },
                    "showlegend": false,
                    "hoverinfo": "none"
                }
            ],
            "layout": {
                "xaxis": {
                    "title": "Most commonly used model"
                },
                "yaxis": {
                    "visible": false,
                    "range": [
                        0,
                        1.3
                    ]
                },
                "showlegend": false,
                "annotations": [
                    {
                        "x": "g_m · v_be",
                        "y": 1.15,
                        "text": "R_out dropped (≈ ∞)",
                        "showarrow": false,
                        "font": {
                            "size": 11,
                            "color": "#aab4c0"
                        }
                    }
                ]
            },
            "height": 280
        },
        {
            "id": "thermal-voltage-note",
            "type": "plotly",
            "title": "The Thermal Voltage V_T ≈ 26 mV",
            "description": "V_T = kT/q. At room temperature (300K): V_T ≈ 26 mV. Sets the scale for all small-signal parameters.",
            "traces": [
                {
                    "x": [
                        "Formula",
                        "Constants",
                        "Result"
                    ],
                    "y": [
                        1,
                        1,
                        1
                    ],
                    "type": "bar",
                    "marker": {
                        "color": [
                            "#4f8cff",
                            "#6b62ff",
                            "#2fbf8f"
                        ]
                    },
                    "text": [
                        "V_T = kT/q",
                        "k = 1.38×10⁻²³ J/K<br>q = 1.6×10⁻¹⁹ C<br>T = 300 K",
                        "V_T ≈ 26 mV<br>at room temp"
                    ],
                    "textposition": "inside",
                    "textfont": {
                        "size": 11,
                        "color": "#ffffff"
                    },
                    "showlegend": false,
                    "hoverinfo": "none"
                }
            ],
            "layout": {
                "xaxis": {
                    "title": ""
                },
                "yaxis": {
                    "visible": false,
                    "range": [
                        0,
                        1.3
                    ]
                },
                "showlegend": false
            },
            "height": 260
        },
        {
            "id": "parameter-calculator-sim",
            "type": "v3-waveform",
            "title": "Interactive: Small-Signal Parameter Calculator",
            "description": "Enter I_CQ and β to see g_m, r_π, r_e, and the complete hybrid-π model with calculated values."
        },
        {
            "id": "re-model-alternative",
            "type": "plotly",
            "title": "Hybrid-π Model vs r_e Model",
            "description": "Both are equivalent. Hybrid-π (r_π at base) suits CE analysis. r_e model (r_e at emitter) suits CB analysis.",
            "traces": [
                {
                    "x": [
                        "Feature",
                        "Input element",
                        "Best for"
                    ],
                    "y": [
                        1,
                        1,
                        1
                    ],
                    "name": "Hybrid-π Model",
                    "type": "bar",
                    "marker": {
                        "color": "#4f8cff"
                    },
                    "text": [
                        "r_π between<br>B and E",
                        "r_π = β·r_e",
                        "Common-emitter<br>analysis"
                    ],
                    "textposition": "inside",
                    "textfont": {
                        "size": 10,
                        "color": "#ffffff"
                    }
                },
                {
                    "x": [
                        "Feature",
                        "Input element",
                        "Best for"
                    ],
                    "y": [
                        1,
                        1,
                        1
                    ],
                    "name": "r_e Model",
                    "type": "bar",
                    "marker": {
                        "color": "#2fbf8f"
                    },
                    "text": [
                        "r_e = V_T/I_CQ<br>in emitter",
                        "r_e = 1/g_m",
                        "Common-base<br>analysis"
                    ],
                    "textposition": "inside",
                    "textfont": {
                        "size": 10,
                        "color": "#ffffff"
                    }
                }
            ],
            "layout": {
                "xaxis": {
                    "title": ""
                },
                "yaxis": {
                    "visible": false,
                    "range": [
                        0,
                        2.2
                    ]
                },
                "barmode": "stack",
                "showlegend": true,
                "annotations": [
                    {
                        "x": "Feature",
                        "y": 2.1,
                        "text": "Both give identical results — r_π = β·r_e",
                        "showarrow": false,
                        "font": {
                            "size": 11,
                            "color": "#f5a623"
                        }
                    }
                ]
            },
            "height": 320
        }
    ]
}