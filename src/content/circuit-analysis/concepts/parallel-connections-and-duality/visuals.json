{
  "visuals": [
    {
      "id": "parallel-circuit-setup",
      "type": "circuit-schematic",
      "title": "Two Resistors in Parallel (KVL Constraint: Same Voltage)",
      "description": "Two resistors R₁ and R₂ share the same two nodes, so they have the same voltage v across them. The total current is the SUM of individual currents: i = i₁ + i₂. This is the defining characteristic of a parallel connection.",
      "width": 400,
      "height": 300,
      "elements": [
        {
          "component": "wire",
          "x1": 40,
          "y1": 60,
          "x2": 120,
          "y2": 60
        },
        {
          "component": "wire",
          "x1": 120,
          "y1": 60,
          "x2": 120,
          "y2": 80
        },
        {
          "component": "resistor",
          "x": 120,
          "y": 110,
          "label": "R₁"
        },
        {
          "component": "wire",
          "x1": 120,
          "y1": 140,
          "x2": 120,
          "y2": 265
        },
        {
          "component": "wire",
          "x1": 280,
          "y1": 60,
          "x2": 280,
          "y2": 80
        },
        {
          "component": "resistor",
          "x": 280,
          "y": 110,
          "label": "R₂"
        },
        {
          "component": "wire",
          "x1": 280,
          "y1": 140,
          "x2": 280,
          "y2": 265
        },
        {
          "component": "wire",
          "x1": 120,
          "y1": 60,
          "x2": 280,
          "y2": 60
        },
        {
          "component": "wire",
          "x1": 120,
          "y1": 265,
          "x2": 280,
          "y2": 265
        },
        {
          "component": "wire",
          "x1": 280,
          "y1": 60,
          "x2": 360,
          "y2": 60
        },
        {
          "component": "wire",
          "x1": 280,
          "y1": 265,
          "x2": 360,
          "y2": 265
        },
        {
          "component": "current-arrow",
          "x": 80,
          "y": 40,
          "label": "i"
        },
        {
          "component": "text",
          "x": 200,
          "y": 25,
          "text": "v (same for both)",
          "fontSize": 11,
          "fontStyle": "italic",
          "color": "var(--accent)"
        },
        {
          "component": "text",
          "x": 75,
          "y": 110,
          "text": "i₁",
          "fontSize": 11,
          "fontStyle": "italic",
          "color": "#3b82f6"
        },
        {
          "component": "text",
          "x": 320,
          "y": 110,
          "text": "i₂",
          "fontSize": 11,
          "fontStyle": "italic",
          "color": "#ef4444"
        }
      ]
    },
    {
      "id": "parallel-addition",
      "type": "plotly",
      "title": "Graphical Addition of V-I Curves (Vertical Stacking)",
      "description": "For parallel elements, we ADD CURRENTS at the same voltage: i(v) = i₁(v) + i₂(v). Graphically, we pick a voltage on the horizontal axis and add the currents vertically. This is the dual of horizontal stacking for series circuits.",
      "traces": [
        {
          "x": [
            0,
            1,
            2,
            3,
            4,
            5
          ],
          "y": [
            0,
            0.01,
            0.02,
            0.03,
            0.04,
            0.05
          ],
          "name": "R₁ = 100Ω (G₁ = 10mS)",
          "mode": "lines",
          "line": {
            "color": "#3b82f6",
            "width": 2.5
          }
        },
        {
          "x": [
            0,
            1,
            2,
            3,
            4,
            5
          ],
          "y": [
            0,
            0.02,
            0.04,
            0.06,
            0.08,
            0.1
          ],
          "name": "R₂ = 50Ω (G₂ = 20mS)",
          "mode": "lines",
          "line": {
            "color": "#ef4444",
            "width": 2.5
          }
        },
        {
          "x": [
            0,
            1,
            2,
            3,
            4,
            5
          ],
          "y": [
            0,
            0.03,
            0.06,
            0.09,
            0.12,
            0.15
          ],
          "name": "Parallel: G₁+G₂ = 30mS",
          "mode": "lines",
          "line": {
            "color": "#22c55e",
            "width": 3
          }
        }
      ],
      "layout": {
        "xaxis": {
          "title": "Voltage v (V)"
        },
        "yaxis": {
          "title": "Current i (A)"
        }
      },
      "centeredAxes": true,
      "width": 520,
      "height": 380
    },
    {
      "id": "vertical-stacking",
      "type": "plotly",
      "title": "Series vs Parallel Duality",
      "description": "Series addition stacks voltages (horizontal), parallel addition stacks currents (vertical). They are DUAL operations — swap v↔i, R↔G, KVL↔KCL, and one becomes the other.",
      "traces": [
        {
          "x": [
            0,
            1,
            2,
            3,
            4,
            5
          ],
          "y": [
            0,
            0.01,
            0.02,
            0.03,
            0.04,
            0.05
          ],
          "name": "R₁ = 100Ω",
          "mode": "lines",
          "line": {
            "color": "#3b82f6",
            "width": 2
          }
        },
        {
          "x": [
            0,
            3,
            6,
            9,
            12,
            15
          ],
          "y": [
            0,
            0.01,
            0.02,
            0.03,
            0.04,
            0.05
          ],
          "name": "Series R₁+R₂+R₃ (horizontal)",
          "mode": "lines",
          "line": {
            "color": "#22c55e",
            "width": 2.5
          }
        },
        {
          "x": [
            0,
            1,
            2,
            3,
            4,
            5
          ],
          "y": [
            0,
            0.03,
            0.06,
            0.09,
            0.12,
            0.15
          ],
          "name": "Parallel G₁+G₂+G₃ (vertical)",
          "mode": "lines",
          "line": {
            "color": "#f59e0b",
            "width": 2.5
          }
        }
      ],
      "layout": {
        "xaxis": {
          "title": "Voltage v (V)"
        },
        "yaxis": {
          "title": "Current i (A)"
        },
        "annotations": [
          {
            "x": 10,
            "y": 0.025,
            "text": "← Horizontal (series)",
            "showarrow": false,
            "font": {
              "size": 10,
              "color": "#22c55e"
            }
          },
          {
            "x": 3,
            "y": 0.12,
            "text": "↑ Vertical (parallel)",
            "showarrow": false,
            "font": {
              "size": 10,
              "color": "#f59e0b"
            }
          }
        ]
      },
      "centeredAxes": true,
      "width": 540,
      "height": 400
    },
    {
      "id": "duality-mirror",
      "type": "plotly",
      "title": "Nonlinear Parallel: Zener Diode ∥ Resistor",
      "description": "Placing a Zener diode in parallel with a resistor creates a voltage clamp. For |v| < VZ, the Zener is off and the resistor dominates. For |v| > VZ, the Zener conducts heavily and limits the voltage.",
      "traces": [
        {
          "x": [
            -8,
            -6,
            -5.1,
            -5,
            -4,
            -2,
            0,
            2,
            4,
            5,
            5.1,
            6,
            8
          ],
          "y": [
            0,
            0,
            -0.01,
            -0.005,
            -0.001,
            0,
            0,
            0,
            0.001,
            0.005,
            0.01,
            0,
            0
          ],
          "name": "Zener Diode",
          "mode": "lines",
          "line": {
            "color": "#f59e0b",
            "width": 2
          }
        },
        {
          "x": [
            -8,
            -6,
            -4,
            -2,
            0,
            2,
            4,
            6,
            8
          ],
          "y": [
            -0.08,
            -0.06,
            -0.04,
            -0.02,
            0,
            0.02,
            0.04,
            0.06,
            0.08
          ],
          "name": "R = 100Ω",
          "mode": "lines",
          "line": {
            "color": "#3b82f6",
            "width": 2
          }
        },
        {
          "x": [
            -8,
            -6,
            -5.1,
            -5,
            -4,
            -2,
            0,
            2,
            4,
            5,
            5.1,
            6,
            8
          ],
          "y": [
            -0.08,
            -0.06,
            -0.06,
            -0.05,
            -0.04,
            -0.02,
            0,
            0.02,
            0.04,
            0.05,
            0.06,
            0.06,
            0.08
          ],
          "name": "Parallel (Zener ∥ R)",
          "mode": "lines",
          "line": {
            "color": "#22c55e",
            "width": 3
          }
        }
      ],
      "layout": {
        "xaxis": {
          "title": "Voltage v (V)"
        },
        "yaxis": {
          "title": "Current i (A)"
        }
      },
      "centeredAxes": true,
      "width": 520,
      "height": 380
    },
    {
      "id": "zener-parallel",
      "type": "circuit-schematic",
      "title": "Mixed Series-Parallel Circuit Reduction",
      "description": "Real circuits often have BOTH series and parallel connections. Strategy: identify sub-groups that are purely series or parallel, combine them into equivalents, then repeat until one element remains.",
      "width": 500,
      "height": 280,
      "elements": [
        {
          "component": "text",
          "x": 250,
          "y": 20,
          "text": "Step-by-step Reduction",
          "fontSize": 14,
          "fontWeight": "bold",
          "color": "var(--accent)"
        },
        {
          "component": "text",
          "x": 120,
          "y": 55,
          "text": "R₂ ∥ R₃ → R₂₃",
          "fontSize": 11,
          "color": "#3b82f6"
        },
        {
          "component": "text",
          "x": 120,
          "y": 75,
          "text": "= R₂R₃/(R₂+R₃)",
          "fontSize": 10,
          "fontStyle": "italic",
          "color": "#94a3b8"
        },
        {
          "component": "text",
          "x": 250,
          "y": 130,
          "text": "→",
          "fontSize": 20,
          "color": "var(--text)"
        },
        {
          "component": "text",
          "x": 380,
          "y": 55,
          "text": "R₁ + R₂₃ (series)",
          "fontSize": 11,
          "color": "#ef4444"
        },
        {
          "component": "text",
          "x": 380,
          "y": 75,
          "text": "= R₁ + R₂₃",
          "fontSize": 10,
          "fontStyle": "italic",
          "color": "#94a3b8"
        },
        {
          "component": "text",
          "x": 250,
          "y": 200,
          "text": "→ Single equivalent R_eq",
          "fontSize": 12,
          "fontWeight": "bold",
          "color": "#22c55e"
        }
      ]
    },
    {
      "id": "diode-parallel-resistor",
      "type": "plotly",
      "title": "Parallel Connection: Diode ∥ Linear Resistor",
      "description": "Adding a diode in parallel with a resistor modifies the positive-voltage region significantly. For v < Vγ, the resistor dominates. For v > Vγ, the diode clamps and most extra current flows through the diode.",
      "traces": [
        {
          "x": [
            -2,
            -1,
            0,
            0.3,
            0.5,
            0.6,
            0.65,
            0.7,
            0.75
          ],
          "y": [
            0,
            0,
            0,
            0,
            0.0005,
            0.004,
            0.012,
            0.03,
            0.06
          ],
          "name": "Diode",
          "mode": "lines",
          "line": {
            "color": "#f59e0b",
            "width": 2
          }
        },
        {
          "x": [
            -2,
            -1,
            0,
            0.3,
            0.5,
            0.7,
            1,
            1.5,
            2
          ],
          "y": [
            -0.02,
            -0.01,
            0,
            0.003,
            0.005,
            0.007,
            0.01,
            0.015,
            0.02
          ],
          "name": "R = 100Ω",
          "mode": "lines",
          "line": {
            "color": "#3b82f6",
            "width": 2
          }
        },
        {
          "x": [
            -2,
            -1,
            0,
            0.3,
            0.5,
            0.6,
            0.65,
            0.7,
            0.75
          ],
          "y": [
            -0.02,
            -0.01,
            0,
            0.003,
            0.0055,
            0.01,
            0.019,
            0.037,
            0.068
          ],
          "name": "Parallel (D ∥ R)",
          "mode": "lines",
          "line": {
            "color": "#22c55e",
            "width": 3
          }
        }
      ],
      "layout": {
        "xaxis": {
          "title": "Voltage v (V)"
        },
        "yaxis": {
          "title": "Current i (A)"
        }
      },
      "centeredAxes": true,
      "width": 500,
      "height": 380
    },
    {
      "id": "falstad-parallel-resistors",
      "type": "falstad-sim",
      "title": "Interactive: Two Resistors in Parallel",
      "description": "Two resistors share the same voltage. The total current splits inversely proportional to resistance.",
      "circuitText": "$ 1 5e-6 10.20027730826997 50 5 43 0\nv 160 288 160 96 0 0 40 10 0 0 0.5\nw 160 96 256 96 0\nr 256 96 352 96 0 2000\nr 256 160 352 160 0 4000\nw 256 96 256 160 0\nw 352 96 352 160 0\nw 352 160 352 288 0\nw 160 288 352 288 0\ng 256 288 256 320 0 0",
      "height": 450
    },
    {
      "id": "parallel-equivalent-comparison",
      "type": "plotly",
      "title": "Parallel Combination: G_eq = G1 + G2",
      "description": "V-I lines for R1=2k, R2=4k, and Req=1.33k. Parallel always decreases total resistance.",
      "traces": [
        {
          "x": [
            -6,
            0,
            6
          ],
          "y": [
            -0.003,
            0,
            0.003
          ],
          "name": "R1=2k",
          "mode": "lines",
          "line": {
            "color": "#22d3ee",
            "width": 2
          }
        },
        {
          "x": [
            -6,
            0,
            6
          ],
          "y": [
            -0.0015,
            0,
            0.0015
          ],
          "name": "R2=4k",
          "mode": "lines",
          "line": {
            "color": "#a78bfa",
            "width": 2
          }
        },
        {
          "x": [
            -6,
            0,
            6
          ],
          "y": [
            -0.0045,
            0,
            0.0045
          ],
          "name": "Req=1.33k",
          "mode": "lines",
          "line": {
            "color": "#f472b6",
            "width": 3,
            "dash": "dash"
          }
        }
      ],
      "layout": {
        "xaxis": {
          "title": "Voltage (V)"
        },
        "yaxis": {
          "title": "Current (A)"
        },
        "showlegend": true
      },
      "centeredAxes": true,
      "height": 380
    }
  ]
}
