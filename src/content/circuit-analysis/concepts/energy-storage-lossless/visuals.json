{
    "visuals": [
        {
            "id": "energy-integral-capacitor",
            "type": "plotly",
            "title": "Energy = Area Under q-v Curve: ∫v(q)dq from q₁ to q₂",
            "traces": [
                {
                    "x": [
                        0,
                        1,
                        2,
                        3,
                        4,
                        5
                    ],
                    "y": [
                        0,
                        1,
                        2,
                        3,
                        4,
                        5
                    ],
                    "name": "v = q/C (linear, C=1F)",
                    "mode": "lines",
                    "fill": "tozeroy",
                    "line": {
                        "color": "#6b62ff",
                        "width": 3
                    }
                }
            ],
            "layout": {
                "xaxis": {
                    "title": "Charge q (C)"
                },
                "yaxis": {
                    "title": "Voltage v (V)"
                },
                "showlegend": true,
                "annotations": [
                    {
                        "x": 2.5,
                        "y": 1.5,
                        "text": "Energy = shaded area",
                        "showarrow": false
                    }
                ]
            }
        },
        {
            "id": "energy-stored-linear",
            "type": "plotly",
            "title": "Energy Stored in Linear Capacitor: E = ½CV² (Quadratic in Voltage)",
            "traces": [
                {
                    "x": [
                        0,
                        1,
                        2,
                        3,
                        4,
                        5
                    ],
                    "y": [
                        0,
                        0.5,
                        2,
                        4.5,
                        8,
                        12.5
                    ],
                    "name": "E = ½CV² (C=1μF)",
                    "mode": "lines+markers",
                    "line": {
                        "color": "#6b62ff",
                        "width": 3
                    },
                    "marker": {
                        "size": 8
                    }
                },
                {
                    "x": [
                        0,
                        1,
                        2,
                        3,
                        4,
                        5
                    ],
                    "y": [
                        0,
                        2.5,
                        10,
                        22.5,
                        40,
                        62.5
                    ],
                    "name": "E = ½CV² (C=5μF)",
                    "mode": "lines+markers",
                    "line": {
                        "color": "#ff6b8a",
                        "width": 2
                    },
                    "marker": {
                        "size": 6
                    }
                }
            ],
            "layout": {
                "xaxis": {
                    "title": "Voltage V (V)"
                },
                "yaxis": {
                    "title": "Energy (μJ)"
                },
                "showlegend": true
            }
        },
        {
            "id": "energy-integral-inductor",
            "type": "plotly",
            "title": "Inductor Energy = ½Li²: Stored in Magnetic Field",
            "traces": [
                {
                    "x": [
                        0,
                        0.5,
                        1,
                        1.5,
                        2,
                        2.5,
                        3
                    ],
                    "y": [
                        0,
                        0.125,
                        0.5,
                        1.125,
                        2,
                        3.125,
                        4.5
                    ],
                    "name": "E = ½Li² (L=1mH)",
                    "mode": "lines+markers",
                    "line": {
                        "color": "#2fbf8f",
                        "width": 3
                    },
                    "marker": {
                        "size": 8
                    }
                }
            ],
            "layout": {
                "xaxis": {
                    "title": "Current i (A)"
                },
                "yaxis": {
                    "title": "Energy (mJ)"
                },
                "showlegend": true
            }
        },
        {
            "id": "lossless-property-demo",
            "type": "plotly",
            "title": "Lossless: Energy In = Energy Out Over One Period (Net = 0)",
            "traces": [
                {
                    "x": [
                        0,
                        0.25,
                        0.5,
                        0.75,
                        1.0,
                        1.25,
                        1.5,
                        1.75,
                        2.0
                    ],
                    "y": [
                        0,
                        1,
                        0,
                        -1,
                        0,
                        1,
                        0,
                        -1,
                        0
                    ],
                    "name": "Power p(t) into capacitor",
                    "mode": "lines",
                    "fill": "tozeroy",
                    "line": {
                        "color": "#6b62ff",
                        "width": 2
                    }
                },
                {
                    "x": [
                        0,
                        2
                    ],
                    "y": [
                        0,
                        0
                    ],
                    "name": "Average power = 0",
                    "mode": "lines",
                    "line": {
                        "color": "#ff6b8a",
                        "width": 3,
                        "dash": "dash"
                    }
                }
            ],
            "layout": {
                "xaxis": {
                    "title": "Time (periods)"
                },
                "yaxis": {
                    "title": "Power (W)"
                },
                "showlegend": true
            }
        },
        {
            "id": "energy-flow-periodic",
            "type": "plotly",
            "title": "Energy Stored vs. Time: Oscillates but Always Returns to Starting Value",
            "traces": [
                {
                    "x": [
                        0,
                        0.25,
                        0.5,
                        0.75,
                        1.0,
                        1.25,
                        1.5,
                        1.75,
                        2.0
                    ],
                    "y": [
                        0,
                        0.5,
                        0,
                        0.5,
                        0,
                        0.5,
                        0,
                        0.5,
                        0
                    ],
                    "name": "E(t) = ½Cv²(t)",
                    "mode": "lines",
                    "line": {
                        "color": "#6b62ff",
                        "width": 3
                    }
                }
            ],
            "layout": {
                "xaxis": {
                    "title": "Time (periods)"
                },
                "yaxis": {
                    "title": "Stored energy (J)"
                },
                "showlegend": true
            }
        },
        {
            "id": "relaxation-points",
            "type": "plotly",
            "title": "Nonlinear q-v Curve: Multiple Relaxation Points",
            "traces": [
                {
                    "x": [
                        -3,
                        -2,
                        -1,
                        0,
                        1,
                        2,
                        3
                    ],
                    "y": [
                        -1,
                        -0.5,
                        0.5,
                        0,
                        0.5,
                        -0.5,
                        1
                    ],
                    "name": "Nonlinear q-v characteristic",
                    "mode": "lines",
                    "line": {
                        "color": "#6b62ff",
                        "width": 3
                    }
                },
                {
                    "x": [
                        -1,
                        0,
                        2
                    ],
                    "y": [
                        0.5,
                        0,
                        -0.5
                    ],
                    "name": "Zero crossings",
                    "mode": "markers",
                    "marker": {
                        "color": "#ff6b8a",
                        "size": 12,
                        "symbol": "circle"
                    }
                }
            ],
            "layout": {
                "xaxis": {
                    "title": "Charge q"
                },
                "yaxis": {
                    "title": "Voltage v"
                },
                "showlegend": true
            }
        },
        {
            "id": "nonlinear-energy-landscape",
            "type": "v3-plot",
            "title": "Stored Energy E(q) Must Be ≥ 0 for All q (From Relaxation Point q*)",
            "config": {
                "xLabel": "Charge q",
                "yLabel": "E(q) = ∫_{q*}^{q} v(q')dq'",
                "curves": [
                    {
                        "label": "Linear: E = q²/(2C)",
                        "data": [
                            [
                                -3,
                                4.5
                            ],
                            [
                                -2,
                                2
                            ],
                            [
                                -1,
                                0.5
                            ],
                            [
                                0,
                                0
                            ],
                            [
                                1,
                                0.5
                            ],
                            [
                                2,
                                2
                            ],
                            [
                                3,
                                4.5
                            ]
                        ],
                        "color": "#6b62ff"
                    },
                    {
                        "label": "Nonlinear (q*=0)",
                        "data": [
                            [
                                -3,
                                3
                            ],
                            [
                                -2,
                                1.5
                            ],
                            [
                                -1,
                                0.3
                            ],
                            [
                                0,
                                0
                            ],
                            [
                                1,
                                0.3
                            ],
                            [
                                2,
                                1.5
                            ],
                            [
                                3,
                                3
                            ]
                        ],
                        "color": "#ff6b8a"
                    }
                ]
            }
        },
        {
            "id": "falstad-energy-flow",
            "type": "falstad-sim",
            "title": "Interactive: Watch Energy Flow In and Out of a Capacitor",
            "description": "In AC excitation, the capacitor alternately charges and discharges. Observe the power oscillation.",
            "circuitText": "$ 1 5e-6 10.20027730826997 64 0 0 43\nv 160 96 160 288 0 1 50.0 5.0 0.0 0.0 0.5\nr 160 96 304 96 0 1000\nc 304 96 304 288 0 1e-6 0\nw 304 288 160 288 0\ng 160 288 160 320 0\no 2 64 0 4099 5 0.05 0 -1\n",
            "height": 450
        }
    ]
}