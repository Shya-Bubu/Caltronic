{
    "conceptId": "independent-sources",
    "visuals": [
        {
            "id": "v1",
            "type": "d3-block-diagram",
            "title": "Water Analogy for Voltage and Current Sources",
            "description": "Left: Water pump maintains constant pressure (voltage source). Right: Flow regulator maintains constant flow rate (current source). This parallels how voltage/current sources work in circuits.",
            "placement": "intuition",
            "blocks": [
                {
                    "id": "pump",
                    "label": "Pump\\n(fixed pressure)",
                    "x": 50,
                    "y": 40,
                    "width": 100,
                    "height": 60,
                    "type": "process",
                    "color": "#3b82f6"
                },
                {
                    "id": "pipe1",
                    "label": "Pipe",
                    "x": 200,
                    "y": 50,
                    "width": 80,
                    "height": 40,
                    "type": "process"
                },
                {
                    "id": "regulator",
                    "label": " Flow Regulator\\n(fixed flow)",
                    "x": 400,
                    "y": 40,
                    "width": 120,
                    "height": 60,
                    "type": "process",
                    "color": "#10b981"
                },
                {
                    "id": "pipe2",
                    "label": "Pipe",
                    "x": 550,
                    "y": 50,
                    "width": 80,
                    "height": 40,
                    "type": "process"
                }
            ],
            "connections": [
                {
                    "from": "pump",
                    "to": "pipe1",
                    "fromSide": "right",
                    "toSide": "left",
                    "label": "Variable flow"
                },
                {
                    "from": "regulator",
                    "to": "pipe2",
                    "fromSide": "right",
                    "toSide": "left",
                    "label": "Constant flow"
                }
            ],
            "annotations": [
                {
                    "x": 100,
                    "y": 120,
                    "text": "≈ Voltage Source"
                },
                {
                    "x": 460,
                    "y": 120,
                    "text": "≈ Current Source"
                }
            ]
        },
        {
            "id": "v2",
            "type": "d3-iv-curve",
            "title": "Voltage Source V-I Characteristic",
            "description": "Vertical line at v = Vs on the v-i plane. Voltage is fixed at Vs regardless of current. Any current value (-∞ to +∞) is permitted.",
            "placement": "intuition",
            "curves": [
                {
                    "label": "Voltage Source (Vs = 5V)",
                    "type": "voltage-source",
                    "voltage": 5,
                    "color": "#3b82f6"
                }
            ],
            "axes": {
                "xLabel": "Voltage v (V)",
                "yLabel": "Current i (A)",
                "xRange": [
                    -10,
                    10
                ],
                "yRange": [
                    -2,
                    2
                ]
            },
            "annotations": [
                {
                    "x": 5,
                    "y": 1.5,
                    "text": "v = 5V (fixed)"
                },
                {
                    "x": 5,
                    "y": -1.5,
                    "text": "i can be anything"
                }
            ]
        },
        {
            "id": "v3",
            "type": "d3-iv-curve",
            "title": "Current Source V-I Characteristic",
            "description": "Horizontal line at i = Is on the v-i plane. Current is fixed at Is regardless of voltage. Any voltage value (-∞ to +∞) is permitted.",
            "placement": "intuition",
            "curves": [
                {
                    "label": "Current Source (Is = 2A)",
                    "type": "current-source",
                    "current": 2,
                    "color": "#10b981"
                }
            ],
            "axes": {
                "xLabel": "Voltage v (V)",
                "yLabel": "Current i (A)",
                "xRange": [
                    -10,
                    10
                ],
                "yRange": [
                    -5,
                    5
                ]
            },
            "annotations": [
                {
                    "x": -8,
                    "y": 2,
                    "text": "i = 2A (fixed)"
                },
                {
                    "x": 5,
                    "y": 2,
                    "text": "v can be anything"
                }
            ]
        },
        {
            "id": "v4",
            "type": "d3-waveform",
            "title": "DC vs AC Sources",
            "description": "Top: DC (constant) voltage source maintains V₀ for all time. Bottom: AC (sinusoidal) voltage source varies as Vm·sin(ωt).",
            "placement": "intuition",
            "multiPlot": true,
            "waveforms": [
                {
                    "type": "dc",
                    "label": "DC Source: v(t) = 5V",
                    "amplitude": 5,
                    "color": "#3b82f6"
                },
                {
                    "type": "sine",
                    "label": "AC Source: v(t) = 5·sin(2πt)",
                    "amplitude": 5,
                    "frequency": 1,
                    "color": "#ef4444"
                }
            ],
            "axes": {
                "xLabel": "Time t (s)",
                "yLabel": "Voltage v (V)",
                "duration": 2.0
            }
        },
        {
            "id": "v5",
            "type": "d3-iv-curve",
            "title": "Real vs Ideal Sources",
            "description": "Ideal voltage source: perfectly vertical line. Real voltage source: slightly sloped due to internal resistance Rint. Under load, terminal voltage drops as v = V₀ - i·Rint.",
            "placement": "intuition",
            "curves": [
                {
                    "label": "Ideal Voltage Source",
                    "type": "voltage-source",
                    "voltage": 9,
                    "color": "#3b82f6"
                },
                {
                    "label": "Real Voltage Source (Rint=5Ω)",
                    "type": "real-voltage-source",
                    "voltage": 9,
                    "internalResistance": 5,
                    "color": "#ef4444",
                    "dashed": true
                }
            ],
            "axes": {
                "xLabel": "Voltage v (V)",
                "yLabel": "Current i (A)",
                "xRange": [
                    0,
                    10
                ],
                "yRange": [
                    0,
                    2
                ]
            },
            "annotations": [
                {
                    "x": 9,
                    "y": 1,
                    "text": "Ideal: v=9V always"
                },
                {
                    "x": 6,
                    "y": 0.7,
                    "text": "Real: v=9-5i",
                    "arrow": true
                }
            ]
        }
    ]
}